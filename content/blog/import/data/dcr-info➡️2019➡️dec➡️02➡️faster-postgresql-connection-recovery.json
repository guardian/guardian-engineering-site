{"version":3,"headline":"Faster PostgreSQL connection recovery","standfirst":"<p>This post covers how a database incident affected one of our services and what we did to improve the situation in the future</p>","webTitle":"Faster PostgreSQL connection recovery","mainMediaElements":[{"displayCredit":true,"_type":"model.dotcomrendering.pageElements.ImageBlockElement","role":"inline","media":{"allImages":[{"index":0,"fields":{"height":"1200","width":"2000"},"mediaType":"Image","mimeType":"image/jpeg","url":"https://media.guim.co.uk/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/2000.jpg"},{"index":1,"fields":{"height":"600","width":"1000"},"mediaType":"Image","mimeType":"image/jpeg","url":"https://media.guim.co.uk/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/1000.jpg"},{"index":2,"fields":{"height":"300","width":"500"},"mediaType":"Image","mimeType":"image/jpeg","url":"https://media.guim.co.uk/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/500.jpg"},{"index":3,"fields":{"height":"84","width":"140"},"mediaType":"Image","mimeType":"image/jpeg","url":"https://media.guim.co.uk/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/140.jpg"},{"index":4,"fields":{"height":"2847","width":"4744"},"mediaType":"Image","mimeType":"image/jpeg","url":"https://media.guim.co.uk/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/4744.jpg"},{"index":5,"fields":{"isMaster":"true","height":"2847","width":"4744"},"mediaType":"Image","mimeType":"image/jpeg","url":"https://media.guim.co.uk/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg"}]},"elementId":"976ac71f-a6fb-48d8-a3a0-c147742dbb44","imageSources":[{"weighting":"inline","srcSet":[{"src":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=620&quality=85&auto=format&fit=max&s=bd0a2f1b51456431543869c619f1ac38","width":620},{"src":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=620&quality=45&auto=format&fit=max&dpr=2&s=69f0161592cae407fdf96511977fd6c5","width":1240},{"src":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=700&quality=85&auto=format&fit=max&s=2660e9d45e301d0b48a86cabc2f21366","width":700},{"src":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=700&quality=45&auto=format&fit=max&dpr=2&s=c3a7dd6b6d5c5bda2807ef8ab749c697","width":1400},{"src":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=620&quality=85&auto=format&fit=max&s=bd0a2f1b51456431543869c619f1ac38","width":620},{"src":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=620&quality=45&auto=format&fit=max&dpr=2&s=69f0161592cae407fdf96511977fd6c5","width":1240},{"src":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=645&quality=85&auto=format&fit=max&s=38b286fcf1f4526f561c9cc51031b70c","width":645},{"src":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=645&quality=45&auto=format&fit=max&dpr=2&s=19b2443bc9b31bd696991d62873928a7","width":1290},{"src":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=465&quality=85&auto=format&fit=max&s=06d3bad6000ee6e29079763a8d31ac1c","width":465},{"src":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=465&quality=45&auto=format&fit=max&dpr=2&s=b9ed8f1b11c49a2cfcf44a858ced6444","width":930}]},{"weighting":"thumbnail","srcSet":[]},{"weighting":"supporting","srcSet":[]},{"weighting":"showcase","srcSet":[{"src":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=1020&quality=85&auto=format&fit=max&s=601cc1da0c11a1c6e76ab6c080e5e34f","width":1020},{"src":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=1020&quality=45&auto=format&fit=max&dpr=2&s=0ff9347a8f58dd47f321fcecf4f78b0a","width":2040},{"src":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=940&quality=85&auto=format&fit=max&s=06170086074f6924475c2cf383bb4ee0","width":940},{"src":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=940&quality=45&auto=format&fit=max&dpr=2&s=8dfa48b364d2d5231b82713cb4408b28","width":1880},{"src":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=700&quality=85&auto=format&fit=max&s=2660e9d45e301d0b48a86cabc2f21366","width":700},{"src":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=700&quality=45&auto=format&fit=max&dpr=2&s=c3a7dd6b6d5c5bda2807ef8ab749c697","width":1400},{"src":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=700&quality=85&auto=format&fit=max&s=2660e9d45e301d0b48a86cabc2f21366","width":700},{"src":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=700&quality=45&auto=format&fit=max&dpr=2&s=c3a7dd6b6d5c5bda2807ef8ab749c697","width":1400},{"src":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=660&quality=85&auto=format&fit=max&s=229e1a863447931f6405b94b9c3c6a55","width":660},{"src":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=660&quality=45&auto=format&fit=max&dpr=2&s=2010b8f3f8269cf9bbd535b063d7727b","width":1320},{"src":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=645&quality=85&auto=format&fit=max&s=38b286fcf1f4526f561c9cc51031b70c","width":645},{"src":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=645&quality=45&auto=format&fit=max&dpr=2&s=19b2443bc9b31bd696991d62873928a7","width":1290},{"src":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=465&quality=85&auto=format&fit=max&s=06d3bad6000ee6e29079763a8d31ac1c","width":465},{"src":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=465&quality=45&auto=format&fit=max&dpr=2&s=b9ed8f1b11c49a2cfcf44a858ced6444","width":930}]},{"weighting":"halfwidth","srcSet":[]},{"weighting":"immersive","srcSet":[{"src":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=1900&quality=85&auto=format&fit=max&s=b71459832982773f8e4290833a3a3047","width":1900},{"src":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=1900&quality=45&auto=format&fit=max&dpr=2&s=95be71a095a9c4d9eb1f98213cc5ed03","width":3800},{"src":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=1300&quality=85&auto=format&fit=max&s=ca2985b5ab48bd63b4aad93461563d70","width":1300},{"src":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=1300&quality=45&auto=format&fit=max&dpr=2&s=05b098df9639e182e1bb899836a172b2","width":2600},{"src":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=1140&quality=85&auto=format&fit=max&s=4481fd15588235b220ee45cafc7ac1ee","width":1140},{"src":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=1140&quality=45&auto=format&fit=max&dpr=2&s=cff749531c7b5834b2d20f86cd7df0d1","width":2280},{"src":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=980&quality=85&auto=format&fit=max&s=f22f40c214b1c6db272f782285b326c0","width":980},{"src":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=980&quality=45&auto=format&fit=max&dpr=2&s=3ad92b093634495b8fca2194df84227c","width":1960},{"src":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=740&quality=85&auto=format&fit=max&s=a6377b8ca3f53fd11951c6bfe3ae549c","width":740},{"src":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=740&quality=45&auto=format&fit=max&dpr=2&s=ff48ca931c41285a38a1591c8ccf9241","width":1480},{"src":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=660&quality=85&auto=format&fit=max&s=229e1a863447931f6405b94b9c3c6a55","width":660},{"src":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=660&quality=45&auto=format&fit=max&dpr=2&s=2010b8f3f8269cf9bbd535b063d7727b","width":1320},{"src":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=480&quality=85&auto=format&fit=max&s=de33c7ff952683573aa9c0f8746e06db","width":480},{"src":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=480&quality=45&auto=format&fit=max&dpr=2&s=20b9a6efab1eabff5c55eff9e6a7991a","width":960}]}],"data":{"alt":"Ethernet data cables are seen in a server room in Canberra","caption":"Ethernet data cables are seen in a server room in Canberra","credit":"Photograph: Mick Tsikas/AAP"}}],"main":"<figure class=\"element element-image\" data-media-id=\"082018d5f58ee662b9b3f15ac91a73a67905deb2\"> \n <img src=\"https://media.guim.co.uk/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/1000.jpg\" alt=\"Ethernet data cables are seen in a server room in Canberra\" width=\"1000\" height=\"600\" class=\"gu-image\"> \n <figcaption> <span class=\"element-image__caption\">Ethernet data cables are seen in a server room in Canberra</span> <span class=\"element-image__credit\">Photograph: Mick Tsikas/AAP</span> \n </figcaption> \n</figure>","filterKeyEvents":false,"keyEvents":[],"blocks":[{"id":"5d9b30828f084ab841734244","elements":[{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<p>Being part of a DevOps team often means having to deal with unplanned or unexpected errors in production. In fact, a big part of our job is to make our applications resilient to outages, and as such, we need to take outages into account when designing our applications. In today’s article we’ll look into one such production incident, and what we did to improve the situation in the future.</p>","elementId":"1bd82f58-08cb-4452-bc9d-0e725924fa73"},{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<p>I’m part of the mobile team and we recently experienced an outage due to a failure on one of our primary databases. We use Amazon’s RDS (Relational Database Service) to store our data in a PostgreSQL database. If you’re unfamiliar with RDS or PostgreSQL, all you have to remember is RDS is the service provider and PostgreSQL is the type of database.</p>","elementId":"0ce717ce-6a54-48e6-8e3d-e6e5103bd3e2"},{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<p>We’ll dive into how the incident happened and what we can do to attenuate the effects of such an incident in the future, but before we do let’s go over a few concepts that we’ll need later.</p>","elementId":"4c9a35a7-ab0b-4b91-8ce8-859eb39d8996"},{"_type":"model.dotcomrendering.pageElements.SubheadingBlockElement","html":"<h2>RDS fail-over and connection pools</h2>","elementId":"29a16ccb-0c27-4ef6-9f5b-a91a33548a3c"},{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<p>If you know what a fail-over or a connection pool is, you can safely skip to the next section, if you don’t let’s define them.</p>","elementId":"344b0488-d198-4a53-bd22-eef2ea6ad836"},{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<p>A fail-over happens when RDS can’t keep the primary database alive for some reason such as a network failure, hardware failure, crash... RDS then promotes a copy of that database as the new primary database. That copy is in fact kept warm and up to date for the sole purpose of being promoted in case of an incident (If you’re interested here’s the <a href=\"https://aws.amazon.com/rds/details/multi-az/\">documentation</a>). This process usually takes about 30s to two minutes.</p>","elementId":"ea1a054b-d060-4472-a037-dcffc253545c"},{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<p>Once promoted, that copy becomes the primary database and gets to execute all the SQL requests.</p>","elementId":"5977d97c-212f-45d9-87ff-49cbdd8a884e"},{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<p>Now, let’s talk about connection pools. A connection pool is a set of network connections kept connected to a database for the purpose of executing requests without having to create a new connection for each request. Once the application needs to execute a request, it checks if a connection is available in the pool and uses it to send the request.</p>","elementId":"576cf385-956a-4968-b84f-8ccc9c2a37b1"},{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<p>If you use a relational database, chances are you are using a connection pool to access the database.</p>","elementId":"0d442e79-fbf2-419c-84b9-f42e72759deb"},{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<p>The most popular connection pool at the Guardian is called <a href=\"https://github.com/brettwooldridge/HikariCP\">Hikari</a> as it is the default connection pool used by the <a href=\"https://www.playframework.com/\">Play framework</a>. In my opinion, it’s probably the best connection pool available for the JVM.</p>","elementId":"049bcd96-1df7-43d9-8823-0351185013ea"},{"_type":"model.dotcomrendering.pageElements.GuideAtomBlockElement","label":"Quick Guide","credit":"","id":"cfee56d3-053e-46e7-9d03-ec0704b3d476","elementId":"31f1b936-778e-427d-9c3e-4bcc954439be","title":"How do I join The Guardian Product & Engineering?","html":"<p><strong>Where can I find open positions?</strong></p><p>Apply for one of our open positions <a href=\"https://workforus.theguardian.com/careers/product-engineering\">here</a>.</p><p><strong>What can I expect from the interview process?</strong></p><p>We aim to be as fair and transparent as possible in our hiring process. Similar to other organisations, there is a CV screening, coding exercise and a face to face interview. Read more about what to expect and apply now <a href=\"https://www.theguardian.com/info/2019/apr/26/applying-to-the-guardians-digital-department\">here</a>, and read more about our department <a href=\"https://theguardian.engineering/\">here</a>.</p>"},{"_type":"model.dotcomrendering.pageElements.SubheadingBlockElement","html":"<h2>What happened</h2>","elementId":"82c927d6-38a9-45f8-b22a-86847c853551"},{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<p>Over the weekend our primary production database experienced a network failure. Again, this is expected and we should plan accordingly.</p>","elementId":"cf34fd67-97c4-474c-8d18-b60940565dff"},{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<p>The database failed over as it should, and most of our stack recovered swiftly.</p>","elementId":"9c394d74-7bd2-44d7-b04d-fe5f3a2dd0a6"},{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<p>Except one of our services (an application built with the Play framework). This had little impact on the overall service, but it’s still an issue. Looking at the logs and CloudWatch metrics it quickly became apparent there was a connectivity issue between our application and the database.</p>","elementId":"4bb10c01-a17c-4fa9-9d59-8b02d837b2cd"},{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<p>What happened is that all the TCP (Transmission Control Protocol) connections of the pool got into a sort of “zombie” state: broken yet not closed. The reason for that is the postgreSQL driver does not set a TCP timeout on the connections. The pool never attempted to close the connections and create new ones, yet no data would come in or out of these connections. The <a href=\"https://github.com/brettwooldridge/HikariCP/wiki/Rapid-Recovery\">Hikari documentation</a> describes the problem like this:</p>","elementId":"3f2cdfda-eb25-4017-9843-7175848cdd5c"},{"_type":"model.dotcomrendering.pageElements.BlockquoteBlockElement","html":"<blockquote class=\"quoted\">\n <p>The reason that HikariCP is powerless to recover connections that are out of the pool is due to unacknowledged TCP traffic. TCP is a synchronous communication scheme that requires “handshaking” from both sides of the connection as packets are exchanged (SYN and ACK packets).</p>\n <p>When TCP communication is abruptly interrupted, the client <em>or</em> server can be left awaiting the acknowledgement of a packet that will never come. The connection is therefore “stuck”, until an operating system level TCP timeout occurs. This can be as long as several hours, depending on the operating system TCP stack tuning.</p>\n</blockquote>","elementId":"353a74c5-447d-4f7e-b227-64eeac27db1c"},{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<p>From the point of view of the connection pool, all the connections were fine but for the newly promoted database there were no incoming connections from the application. It took the application six hours to eventually fail, with new servers coming online the database access was restored and everything went back to normal. This is far from ideal.</p>","elementId":"6999883d-b3cf-4fc1-84b2-85214ce75f16"},{"_type":"model.dotcomrendering.pageElements.SubheadingBlockElement","html":"<h2>Reproducing</h2>","elementId":"d4be0981-8f1d-4b7f-9a18-a816849031bc"},{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<p>I managed to partially reproduce the issue in our test environment using the RDS console. It’s hard to reproduce a hardware or a network failure. In the RDS console there is an option to reboot the instance with a failover. Using that option while having a moderate amount of traffic to the service I managed to get a few of the connections to reach the same state we had in production. This contrasts with our production incident where <em>all</em> the connections reached that state at the same time, but it doesn’t matter here as we only want to prove the pool can recover.</p>","elementId":"65004f28-01e8-4105-957a-d1e611d8f920"},{"displayCredit":true,"_type":"model.dotcomrendering.pageElements.ImageBlockElement","role":"inline","media":{"allImages":[{"index":0,"fields":{"height":"558","width":"1680"},"mediaType":"Image","mimeType":"image/jpeg","url":"https://media.guim.co.uk/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/1680.jpg"},{"index":1,"fields":{"isMaster":"true","height":"558","width":"1680"},"mediaType":"Image","mimeType":"image/jpeg","url":"https://media.guim.co.uk/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg"},{"index":2,"fields":{"height":"332","width":"1000"},"mediaType":"Image","mimeType":"image/jpeg","url":"https://media.guim.co.uk/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/1000.jpg"},{"index":3,"fields":{"height":"166","width":"500"},"mediaType":"Image","mimeType":"image/jpeg","url":"https://media.guim.co.uk/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/500.jpg"},{"index":4,"fields":{"height":"47","width":"140"},"mediaType":"Image","mimeType":"image/jpeg","url":"https://media.guim.co.uk/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/140.jpg"}]},"elementId":"cf7b421c-5037-436c-8201-ea4d5d0791b1","imageSources":[{"weighting":"inline","srcSet":[{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=620&quality=85&auto=format&fit=max&s=7c04aaec907a130490576d60df087394","width":620},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=620&quality=45&auto=format&fit=max&dpr=2&s=8d8d1f3672674036b89713d0ad322aa2","width":1240},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=605&quality=85&auto=format&fit=max&s=e1f09881dafedf29b8648a25111b276f","width":605},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=605&quality=45&auto=format&fit=max&dpr=2&s=e624ce3101a3e0a1bee2714e2edb04fc","width":1210},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=445&quality=85&auto=format&fit=max&s=c9bf9ee73e89f24a63317429a32db64c","width":445},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=445&quality=45&auto=format&fit=max&dpr=2&s=fec49fcd55c810e956b2ea5aca96b8ff","width":890}]},{"weighting":"thumbnail","srcSet":[{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=140&quality=85&auto=format&fit=max&s=5e093dde5c23caefa809860b88ee450c","width":140},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=140&quality=45&auto=format&fit=max&dpr=2&s=d1d1e147def04dd75c5315ba548ee53c","width":280},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=120&quality=85&auto=format&fit=max&s=161f357d993a7676a65368775069891e","width":120},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=120&quality=45&auto=format&fit=max&dpr=2&s=1be7ceb09aa4f19b125d955958b06300","width":240}]},{"weighting":"supporting","srcSet":[{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=380&quality=85&auto=format&fit=max&s=73a9d66ef5171e280913295e8c5c035d","width":380},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=380&quality=45&auto=format&fit=max&dpr=2&s=aa1ab9314179a071f7def0b0971595e8","width":760},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=300&quality=85&auto=format&fit=max&s=050c7323fd0f3112773ad087892ed09a","width":300},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=300&quality=45&auto=format&fit=max&dpr=2&s=09454e950cfc867b6fd37620f8f5d7dc","width":600},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=620&quality=85&auto=format&fit=max&s=7c04aaec907a130490576d60df087394","width":620},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=620&quality=45&auto=format&fit=max&dpr=2&s=8d8d1f3672674036b89713d0ad322aa2","width":1240},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=605&quality=85&auto=format&fit=max&s=e1f09881dafedf29b8648a25111b276f","width":605},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=605&quality=45&auto=format&fit=max&dpr=2&s=e624ce3101a3e0a1bee2714e2edb04fc","width":1210},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=445&quality=85&auto=format&fit=max&s=c9bf9ee73e89f24a63317429a32db64c","width":445},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=445&quality=45&auto=format&fit=max&dpr=2&s=fec49fcd55c810e956b2ea5aca96b8ff","width":890}]},{"weighting":"showcase","srcSet":[{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=860&quality=85&auto=format&fit=max&s=827b26379908a88e19e29fb50d4b7bd7","width":860},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=860&quality=45&auto=format&fit=max&dpr=2&s=e918f14f0ce27a6b6f60cb1c1d1b35fb","width":1720},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=780&quality=85&auto=format&fit=max&s=d4778cc682855c1515014be891b76aac","width":780},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=780&quality=45&auto=format&fit=max&dpr=2&s=89a6bc2504793a19bf82b7e9b8c02767","width":1560},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=620&quality=85&auto=format&fit=max&s=7c04aaec907a130490576d60df087394","width":620},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=620&quality=45&auto=format&fit=max&dpr=2&s=8d8d1f3672674036b89713d0ad322aa2","width":1240},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=605&quality=85&auto=format&fit=max&s=e1f09881dafedf29b8648a25111b276f","width":605},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=605&quality=45&auto=format&fit=max&dpr=2&s=e624ce3101a3e0a1bee2714e2edb04fc","width":1210},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=445&quality=85&auto=format&fit=max&s=c9bf9ee73e89f24a63317429a32db64c","width":445},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=445&quality=45&auto=format&fit=max&dpr=2&s=fec49fcd55c810e956b2ea5aca96b8ff","width":890}]},{"weighting":"halfwidth","srcSet":[{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=620&quality=85&auto=format&fit=max&s=7c04aaec907a130490576d60df087394","width":620},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=620&quality=45&auto=format&fit=max&dpr=2&s=8d8d1f3672674036b89713d0ad322aa2","width":1240},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=605&quality=85&auto=format&fit=max&s=e1f09881dafedf29b8648a25111b276f","width":605},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=605&quality=45&auto=format&fit=max&dpr=2&s=e624ce3101a3e0a1bee2714e2edb04fc","width":1210},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=445&quality=85&auto=format&fit=max&s=c9bf9ee73e89f24a63317429a32db64c","width":445},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=445&quality=45&auto=format&fit=max&dpr=2&s=fec49fcd55c810e956b2ea5aca96b8ff","width":890}]},{"weighting":"immersive","srcSet":[{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=1900&quality=85&auto=format&fit=max&s=da3e0b30c0f072566e431decb5f6a225","width":1900},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=1900&quality=45&auto=format&fit=max&dpr=2&s=040e5e84731a5175a055f384d4626037","width":3800},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=1300&quality=85&auto=format&fit=max&s=a4c2992c3fe944004d9a9a71ba787e74","width":1300},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=1300&quality=45&auto=format&fit=max&dpr=2&s=fe16db116a7230e5cdadc75d7e0f2589","width":2600},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=1140&quality=85&auto=format&fit=max&s=093dca2353ec86cc9a3b0e5f138f3d75","width":1140},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=1140&quality=45&auto=format&fit=max&dpr=2&s=08af01c784f24e0722f12ecf92a6ece3","width":2280},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=980&quality=85&auto=format&fit=max&s=a16ae90395ade715ca914b65e44d5d90","width":980},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=980&quality=45&auto=format&fit=max&dpr=2&s=3ef600a77bf26d66ff39ff51d450d686","width":1960},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=740&quality=85&auto=format&fit=max&s=4d51696e8de50c68c316295c5be2fb2b","width":740},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=740&quality=45&auto=format&fit=max&dpr=2&s=3e14c0f0087e29648102133f7900bafc","width":1480},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=660&quality=85&auto=format&fit=max&s=a18df62839fcf05a6fa80ee2164d904d","width":660},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=660&quality=45&auto=format&fit=max&dpr=2&s=474694b488711f391dc30463c5c4aaae","width":1320},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=480&quality=85&auto=format&fit=max&s=1d8dfb490f4da17c35aae5e34cb9da6e","width":480},{"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=480&quality=45&auto=format&fit=max&dpr=2&s=784e9e0b7ffef70f963327ca980d0cec","width":960}]}],"data":{"alt":"The AWS console offers a checkbox to reboot a database instance with a fail-over","caption":"The AWS console offers an option to reboot a database instance with a fail-over","credit":"Photograph: THE GUARDIAN"}},{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<p>After a few database reboots (6), I saw the number of connections to the database going down. In other words, connections were dropped but our application still thought everything was fine and no further connection attempts were made.</p>","elementId":"c3d2af00-f0a7-4fc5-8f32-47a9034db919"},{"displayCredit":true,"_type":"model.dotcomrendering.pageElements.ImageBlockElement","role":"inline","media":{"allImages":[{"index":0,"fields":{"height":"324","width":"1780"},"mediaType":"Image","mimeType":"image/jpeg","url":"https://media.guim.co.uk/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/1780.jpg"},{"index":1,"fields":{"isMaster":"true","height":"324","width":"1780"},"mediaType":"Image","mimeType":"image/jpeg","url":"https://media.guim.co.uk/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg"},{"index":2,"fields":{"height":"182","width":"1000"},"mediaType":"Image","mimeType":"image/jpeg","url":"https://media.guim.co.uk/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/1000.jpg"},{"index":3,"fields":{"height":"91","width":"500"},"mediaType":"Image","mimeType":"image/jpeg","url":"https://media.guim.co.uk/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/500.jpg"},{"index":4,"fields":{"height":"25","width":"140"},"mediaType":"Image","mimeType":"image/jpeg","url":"https://media.guim.co.uk/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/140.jpg"}]},"elementId":"0fda784c-ac38-4b22-8afa-0c520d19b316","imageSources":[{"weighting":"inline","srcSet":[{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=620&quality=85&auto=format&fit=max&s=cf1922d0800899a46c03825e7f0d4e73","width":620},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=620&quality=45&auto=format&fit=max&dpr=2&s=d174ab279ef61155517a8e192446d791","width":1240},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=605&quality=85&auto=format&fit=max&s=fffe84b7009be162deb60a45952f632f","width":605},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=605&quality=45&auto=format&fit=max&dpr=2&s=e10d34236cb8214a7bbccaba283fa48f","width":1210},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=445&quality=85&auto=format&fit=max&s=677f3e202243da754ccdc658ebaa759d","width":445},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=445&quality=45&auto=format&fit=max&dpr=2&s=7b19ceaef45ffa48573c1488b3092232","width":890}]},{"weighting":"thumbnail","srcSet":[{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=140&quality=85&auto=format&fit=max&s=99af4ee6dbfaa4214466a42bd7015f6a","width":140},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=140&quality=45&auto=format&fit=max&dpr=2&s=2ca3e6c2ad269a0228069b4a329d866c","width":280},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=120&quality=85&auto=format&fit=max&s=e9ea6b9783f33f3d8759d198b5e6a0cf","width":120},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=120&quality=45&auto=format&fit=max&dpr=2&s=652d036037b4f29e63421b43c6dfcbc1","width":240}]},{"weighting":"supporting","srcSet":[{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=380&quality=85&auto=format&fit=max&s=954ee8cbbdbd9e17f7ea554889474f8e","width":380},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=380&quality=45&auto=format&fit=max&dpr=2&s=26c94bc5a0d63b02e0ef10da02fd9e2c","width":760},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=300&quality=85&auto=format&fit=max&s=526c991ea67ffcfeaeab859268b11d36","width":300},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=300&quality=45&auto=format&fit=max&dpr=2&s=9750d38ea289063468e62bc5052989f8","width":600},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=620&quality=85&auto=format&fit=max&s=cf1922d0800899a46c03825e7f0d4e73","width":620},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=620&quality=45&auto=format&fit=max&dpr=2&s=d174ab279ef61155517a8e192446d791","width":1240},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=605&quality=85&auto=format&fit=max&s=fffe84b7009be162deb60a45952f632f","width":605},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=605&quality=45&auto=format&fit=max&dpr=2&s=e10d34236cb8214a7bbccaba283fa48f","width":1210},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=445&quality=85&auto=format&fit=max&s=677f3e202243da754ccdc658ebaa759d","width":445},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=445&quality=45&auto=format&fit=max&dpr=2&s=7b19ceaef45ffa48573c1488b3092232","width":890}]},{"weighting":"showcase","srcSet":[{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=860&quality=85&auto=format&fit=max&s=12ea578995acff4e7b2cc6149b95459a","width":860},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=860&quality=45&auto=format&fit=max&dpr=2&s=35948f01b78979be2edd54dac9dae423","width":1720},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=780&quality=85&auto=format&fit=max&s=91533be866c28d28aebb6e10f67e659a","width":780},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=780&quality=45&auto=format&fit=max&dpr=2&s=57faa1dad145fd3419d268a79d502f9c","width":1560},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=620&quality=85&auto=format&fit=max&s=cf1922d0800899a46c03825e7f0d4e73","width":620},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=620&quality=45&auto=format&fit=max&dpr=2&s=d174ab279ef61155517a8e192446d791","width":1240},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=605&quality=85&auto=format&fit=max&s=fffe84b7009be162deb60a45952f632f","width":605},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=605&quality=45&auto=format&fit=max&dpr=2&s=e10d34236cb8214a7bbccaba283fa48f","width":1210},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=445&quality=85&auto=format&fit=max&s=677f3e202243da754ccdc658ebaa759d","width":445},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=445&quality=45&auto=format&fit=max&dpr=2&s=7b19ceaef45ffa48573c1488b3092232","width":890}]},{"weighting":"halfwidth","srcSet":[{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=620&quality=85&auto=format&fit=max&s=cf1922d0800899a46c03825e7f0d4e73","width":620},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=620&quality=45&auto=format&fit=max&dpr=2&s=d174ab279ef61155517a8e192446d791","width":1240},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=605&quality=85&auto=format&fit=max&s=fffe84b7009be162deb60a45952f632f","width":605},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=605&quality=45&auto=format&fit=max&dpr=2&s=e10d34236cb8214a7bbccaba283fa48f","width":1210},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=445&quality=85&auto=format&fit=max&s=677f3e202243da754ccdc658ebaa759d","width":445},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=445&quality=45&auto=format&fit=max&dpr=2&s=7b19ceaef45ffa48573c1488b3092232","width":890}]},{"weighting":"immersive","srcSet":[{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=1900&quality=85&auto=format&fit=max&s=58461652f1e366a153a28a4e1b661665","width":1900},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=1900&quality=45&auto=format&fit=max&dpr=2&s=a3fda2056927d835dc0442dd5101cba8","width":3800},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=1300&quality=85&auto=format&fit=max&s=b8fabc9c8db3be224a483ea429b654be","width":1300},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=1300&quality=45&auto=format&fit=max&dpr=2&s=6871be978f6fcc9be37ab3a92a1b8fab","width":2600},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=1140&quality=85&auto=format&fit=max&s=5cdba4ea488ebc8c8769017db926c35c","width":1140},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=1140&quality=45&auto=format&fit=max&dpr=2&s=8cae3f225fe36c7b1056c80bf3f9da26","width":2280},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=980&quality=85&auto=format&fit=max&s=400196f2b27b38d12951486784cb2a1c","width":980},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=980&quality=45&auto=format&fit=max&dpr=2&s=af5983fdbbf7d271b1c800350799e7a2","width":1960},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=740&quality=85&auto=format&fit=max&s=50cfdc5f8bf3233a86935c30faad137b","width":740},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=740&quality=45&auto=format&fit=max&dpr=2&s=dfb9c23527f736590b84daf364291026","width":1480},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=660&quality=85&auto=format&fit=max&s=0c891e0e04877eedff147853c57d692f","width":660},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=660&quality=45&auto=format&fit=max&dpr=2&s=dd3ac53e32445d01ab9f72119b1d0789","width":1320},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=480&quality=85&auto=format&fit=max&s=a5cf61eb166fd37c526f2759b6d11bca","width":480},{"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=480&quality=45&auto=format&fit=max&dpr=2&s=c618e5b3e8643877065b278225d53107","width":960}]}],"data":{"alt":"A CloudWatch graph showing the number of connections to the database going down","caption":"A CloudWatch graph showing the number of connections to the database going down","credit":"Photograph: THE GUARDIAN"}},{"_type":"model.dotcomrendering.pageElements.SubheadingBlockElement","html":"<h2>The solution</h2>","elementId":"16204e4e-2dd4-440d-94c6-34b06f68ea0e"},{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<p>While rapid recovery isn’t a new concept I hadn’t heard of it. I only discovered it while investigating our incident. It turns out Hikari has a <a href=\"https://github.com/brettwooldridge/HikariCP/wiki/Rapid-Recovery\">brilliant page dedicated to it</a>.</p>","elementId":"dd54d329-95f7-448f-8b44-b3c0e45a2398"},{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<p>Their advice is two fold:</p>","elementId":"ce8cff61-3d56-441f-9087-d647239deec4"},{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<ul>\n <li>\n  <p>Ensure you don’t cache DNS for too long. The JVM default is indefinite for security reasons, but this didn’t age well with the advent of cloud computing. We changed the default such that any Guardian server with a JVM should only cache DNS for 60s. You can see how Max and Roberto implemented that change for our whole department <a href=\"https://github.com/guardian/amigo/pull/239\">here</a>.</p></li>\n <li>\n  <p>Ensure you set a TCP timeout. Some drivers support it, some don’t. PostgreSQL supports it but sets it to unlimited by default. So by default connections that have been dropped <em>might</em> never be closed.</p></li>\n</ul>","elementId":"6a987f91-1f40-44ed-8241-c6f0bec285e5"},{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<p><em>How to set it?</em></p>","elementId":"a737b61b-2d2b-4295-8da5-033bad5943e0"},{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<p>There’s likely multiple ways to do so, in our specific case I had to add it as a property of the data source. See the pull <a href=\"https://github.com/guardian/mobile-n10n/pull/467\">request here</a>.</p>","elementId":"3d3ba3b6-b7f1-4b05-9301-d661d32b7155"},{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<p><em>What value to set it to?</em></p>","elementId":"fe3bf1f3-1151-4f1a-925f-a2248c61bed4"},{"_type":"model.dotcomrendering.pageElements.BlockquoteBlockElement","html":"<blockquote class=\"quoted\">\n <p>HikariCP recommends that the driver-level socket timeout be set to (at least) 2-3x the longest running SQL transaction, or 30 seconds, whichever is longer. However, your own recovery time targets should determine the appropriate timeout for your application.</p>\n</blockquote>","elementId":"b8ba3a0f-2990-49d9-9aa6-490742e69a6f"},{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<p>In our case: 30s.</p>","elementId":"46682dc1-2755-497e-afb5-c13f7b06ecef"},{"displayCredit":true,"_type":"model.dotcomrendering.pageElements.ImageBlockElement","role":"inline","media":{"allImages":[{"index":0,"fields":{"height":"168","width":"1142"},"mediaType":"Image","mimeType":"image/jpeg","url":"https://media.guim.co.uk/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/1142.jpg"},{"index":1,"fields":{"isMaster":"true","height":"168","width":"1142"},"mediaType":"Image","mimeType":"image/jpeg","url":"https://media.guim.co.uk/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg"},{"index":2,"fields":{"height":"147","width":"1000"},"mediaType":"Image","mimeType":"image/jpeg","url":"https://media.guim.co.uk/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/1000.jpg"},{"index":3,"fields":{"height":"74","width":"500"},"mediaType":"Image","mimeType":"image/jpeg","url":"https://media.guim.co.uk/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/500.jpg"},{"index":4,"fields":{"height":"21","width":"140"},"mediaType":"Image","mimeType":"image/jpeg","url":"https://media.guim.co.uk/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/140.jpg"}]},"elementId":"96263441-b6fc-4492-a07e-d854fdc71181","imageSources":[{"weighting":"inline","srcSet":[{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=620&quality=85&auto=format&fit=max&s=53816be6493887ae4879d2379117709a","width":620},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=620&quality=45&auto=format&fit=max&dpr=2&s=5eefcecce8218a240343c8d162721068","width":1240},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=605&quality=85&auto=format&fit=max&s=c10bb20fc6bde41b43139b9499e26ea3","width":605},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=605&quality=45&auto=format&fit=max&dpr=2&s=b8f3c402f77e0f36c017136c84c08ebd","width":1210},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=445&quality=85&auto=format&fit=max&s=e612de5436a67cc1c2eaf77cf07dfa3f","width":445},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=445&quality=45&auto=format&fit=max&dpr=2&s=e93e3698f6d155dfaccfa5832b0c6041","width":890}]},{"weighting":"thumbnail","srcSet":[{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=140&quality=85&auto=format&fit=max&s=844ac620268094f1aa752d9559950d25","width":140},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=140&quality=45&auto=format&fit=max&dpr=2&s=1f3420a646ebeaf878cfad0f07fd3703","width":280},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=120&quality=85&auto=format&fit=max&s=cfb6470639053f19ca2905e507515377","width":120},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=120&quality=45&auto=format&fit=max&dpr=2&s=4b723c11596dd6ccc9d32b1c71526093","width":240}]},{"weighting":"supporting","srcSet":[{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=380&quality=85&auto=format&fit=max&s=be2069435e69e3c4feca9ee109016a64","width":380},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=380&quality=45&auto=format&fit=max&dpr=2&s=528d51469c29805a37b0f9c1a2a184d8","width":760},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=300&quality=85&auto=format&fit=max&s=b7ccca5ae68972df8815b0d51d62ea3c","width":300},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=300&quality=45&auto=format&fit=max&dpr=2&s=31226d602475b7f028b5338cabb055d0","width":600},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=620&quality=85&auto=format&fit=max&s=53816be6493887ae4879d2379117709a","width":620},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=620&quality=45&auto=format&fit=max&dpr=2&s=5eefcecce8218a240343c8d162721068","width":1240},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=605&quality=85&auto=format&fit=max&s=c10bb20fc6bde41b43139b9499e26ea3","width":605},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=605&quality=45&auto=format&fit=max&dpr=2&s=b8f3c402f77e0f36c017136c84c08ebd","width":1210},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=445&quality=85&auto=format&fit=max&s=e612de5436a67cc1c2eaf77cf07dfa3f","width":445},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=445&quality=45&auto=format&fit=max&dpr=2&s=e93e3698f6d155dfaccfa5832b0c6041","width":890}]},{"weighting":"showcase","srcSet":[{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=860&quality=85&auto=format&fit=max&s=67f39b8e251125419f9560aaa432833a","width":860},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=860&quality=45&auto=format&fit=max&dpr=2&s=39b6316795407f078973c6ec201b1f3e","width":1720},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=780&quality=85&auto=format&fit=max&s=8ab32e24e51e876ba62cacd9cca242a7","width":780},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=780&quality=45&auto=format&fit=max&dpr=2&s=0480985319964f45f7336ecae2a0377b","width":1560},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=620&quality=85&auto=format&fit=max&s=53816be6493887ae4879d2379117709a","width":620},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=620&quality=45&auto=format&fit=max&dpr=2&s=5eefcecce8218a240343c8d162721068","width":1240},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=605&quality=85&auto=format&fit=max&s=c10bb20fc6bde41b43139b9499e26ea3","width":605},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=605&quality=45&auto=format&fit=max&dpr=2&s=b8f3c402f77e0f36c017136c84c08ebd","width":1210},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=445&quality=85&auto=format&fit=max&s=e612de5436a67cc1c2eaf77cf07dfa3f","width":445},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=445&quality=45&auto=format&fit=max&dpr=2&s=e93e3698f6d155dfaccfa5832b0c6041","width":890}]},{"weighting":"halfwidth","srcSet":[{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=620&quality=85&auto=format&fit=max&s=53816be6493887ae4879d2379117709a","width":620},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=620&quality=45&auto=format&fit=max&dpr=2&s=5eefcecce8218a240343c8d162721068","width":1240},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=605&quality=85&auto=format&fit=max&s=c10bb20fc6bde41b43139b9499e26ea3","width":605},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=605&quality=45&auto=format&fit=max&dpr=2&s=b8f3c402f77e0f36c017136c84c08ebd","width":1210},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=445&quality=85&auto=format&fit=max&s=e612de5436a67cc1c2eaf77cf07dfa3f","width":445},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=445&quality=45&auto=format&fit=max&dpr=2&s=e93e3698f6d155dfaccfa5832b0c6041","width":890}]},{"weighting":"immersive","srcSet":[{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=1900&quality=85&auto=format&fit=max&s=d489920c8f86e867d19ad4bb13530163","width":1900},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=1900&quality=45&auto=format&fit=max&dpr=2&s=531cf848b1575e0a7a059bd910ffd9ae","width":3800},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=1300&quality=85&auto=format&fit=max&s=4ae060a552f83f098ed06ecba86c1ba6","width":1300},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=1300&quality=45&auto=format&fit=max&dpr=2&s=d1a7fe962107dc5307d6f420454ccd48","width":2600},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=1140&quality=85&auto=format&fit=max&s=a613e5e56dbce93eb0b476115b199a07","width":1140},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=1140&quality=45&auto=format&fit=max&dpr=2&s=1270bca689f6f907c6f7295374aeebd3","width":2280},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=980&quality=85&auto=format&fit=max&s=5a8747da1c114439ade59de675e745e7","width":980},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=980&quality=45&auto=format&fit=max&dpr=2&s=883ca0d58b27f446824402babee129e4","width":1960},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=740&quality=85&auto=format&fit=max&s=3e89e183929f7413a0aa7675b5c4867d","width":740},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=740&quality=45&auto=format&fit=max&dpr=2&s=5b69da54ef0edfd3cac3afb3e368bf5e","width":1480},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=660&quality=85&auto=format&fit=max&s=3735b45b4327187613afac694ea47709","width":660},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=660&quality=45&auto=format&fit=max&dpr=2&s=694b4532d96fadb7e06f8452fc1be237","width":1320},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=480&quality=85&auto=format&fit=max&s=32aa126aec32a9cb4035010274c193df","width":480},{"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=480&quality=45&auto=format&fit=max&dpr=2&s=fb3c9e6fbc408e261fdf238bf0961105","width":960}]}],"data":{"alt":"Setting the socket timeout on a Hikari connection pool by using hikariConfig.addSourceProperty(\"socketTimeout\", \"30\")","caption":"Setting the socket timeout on a Hikari connection pool","credit":"Photograph: THE GUARDIAN"}},{"_type":"model.dotcomrendering.pageElements.SubheadingBlockElement","html":"<h2>The result</h2>","elementId":"0511dc85-34ba-46b5-882e-a3d0ea9c04bd"},{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<p>Now that our pool has been reconfigured, let’s test again:</p>","elementId":"9f819429-baf2-4850-a74f-df1346c6b931"},{"displayCredit":true,"_type":"model.dotcomrendering.pageElements.ImageBlockElement","role":"inline","media":{"allImages":[{"index":0,"fields":{"height":"368","width":"1680"},"mediaType":"Image","mimeType":"image/jpeg","url":"https://media.guim.co.uk/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/1680.jpg"},{"index":1,"fields":{"isMaster":"true","height":"368","width":"1680"},"mediaType":"Image","mimeType":"image/jpeg","url":"https://media.guim.co.uk/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg"},{"index":2,"fields":{"height":"219","width":"1000"},"mediaType":"Image","mimeType":"image/jpeg","url":"https://media.guim.co.uk/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/1000.jpg"},{"index":3,"fields":{"height":"110","width":"500"},"mediaType":"Image","mimeType":"image/jpeg","url":"https://media.guim.co.uk/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/500.jpg"},{"index":4,"fields":{"height":"31","width":"140"},"mediaType":"Image","mimeType":"image/jpeg","url":"https://media.guim.co.uk/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/140.jpg"}]},"elementId":"4a7bd70a-c9c8-4b01-865b-1ca766719bc0","imageSources":[{"weighting":"inline","srcSet":[{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=620&quality=85&auto=format&fit=max&s=273de7d4e9b3a4c1d53d1dd4d82bade1","width":620},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=620&quality=45&auto=format&fit=max&dpr=2&s=4231a3653de66064511d49de3c53cab2","width":1240},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=605&quality=85&auto=format&fit=max&s=39b6adcc54429e7a4dd590c2b7877ec2","width":605},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=605&quality=45&auto=format&fit=max&dpr=2&s=1f297e49336537c7e5157d9d416ffac2","width":1210},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=445&quality=85&auto=format&fit=max&s=d5f37a7a3650ec5da811c236a7abdbf6","width":445},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=445&quality=45&auto=format&fit=max&dpr=2&s=d1922624b421e091edc9f6a0115f56fc","width":890}]},{"weighting":"thumbnail","srcSet":[{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=140&quality=85&auto=format&fit=max&s=eb1f7b705c2f007162f3e2ac6a3a9c74","width":140},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=140&quality=45&auto=format&fit=max&dpr=2&s=c272a1d350d9252dcf3f9c32fdcd4d11","width":280},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=120&quality=85&auto=format&fit=max&s=a8871457a4b402220b18f3daf48bf3fb","width":120},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=120&quality=45&auto=format&fit=max&dpr=2&s=cab3cbf273b89d53e997792c9a5a93cd","width":240}]},{"weighting":"supporting","srcSet":[{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=380&quality=85&auto=format&fit=max&s=9ef3a0d5955742e4fd9984adcf7f78eb","width":380},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=380&quality=45&auto=format&fit=max&dpr=2&s=27f8fd0d49d98ed5093ce3b4155ce736","width":760},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=300&quality=85&auto=format&fit=max&s=ab3265afc3669c011459471f163ae002","width":300},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=300&quality=45&auto=format&fit=max&dpr=2&s=fbdf25153cff58cf0beb9e6726ff71f5","width":600},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=620&quality=85&auto=format&fit=max&s=273de7d4e9b3a4c1d53d1dd4d82bade1","width":620},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=620&quality=45&auto=format&fit=max&dpr=2&s=4231a3653de66064511d49de3c53cab2","width":1240},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=605&quality=85&auto=format&fit=max&s=39b6adcc54429e7a4dd590c2b7877ec2","width":605},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=605&quality=45&auto=format&fit=max&dpr=2&s=1f297e49336537c7e5157d9d416ffac2","width":1210},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=445&quality=85&auto=format&fit=max&s=d5f37a7a3650ec5da811c236a7abdbf6","width":445},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=445&quality=45&auto=format&fit=max&dpr=2&s=d1922624b421e091edc9f6a0115f56fc","width":890}]},{"weighting":"showcase","srcSet":[{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=860&quality=85&auto=format&fit=max&s=248deb924f390a8b5046525ad4caad81","width":860},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=860&quality=45&auto=format&fit=max&dpr=2&s=d534b23e3d54e4b9e21d7bc728eaaaf4","width":1720},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=780&quality=85&auto=format&fit=max&s=f8bf124fa2cbd3d8c153016c5a28d99c","width":780},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=780&quality=45&auto=format&fit=max&dpr=2&s=5b91069bf36d95eed58aad795d913b04","width":1560},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=620&quality=85&auto=format&fit=max&s=273de7d4e9b3a4c1d53d1dd4d82bade1","width":620},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=620&quality=45&auto=format&fit=max&dpr=2&s=4231a3653de66064511d49de3c53cab2","width":1240},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=605&quality=85&auto=format&fit=max&s=39b6adcc54429e7a4dd590c2b7877ec2","width":605},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=605&quality=45&auto=format&fit=max&dpr=2&s=1f297e49336537c7e5157d9d416ffac2","width":1210},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=445&quality=85&auto=format&fit=max&s=d5f37a7a3650ec5da811c236a7abdbf6","width":445},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=445&quality=45&auto=format&fit=max&dpr=2&s=d1922624b421e091edc9f6a0115f56fc","width":890}]},{"weighting":"halfwidth","srcSet":[{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=620&quality=85&auto=format&fit=max&s=273de7d4e9b3a4c1d53d1dd4d82bade1","width":620},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=620&quality=45&auto=format&fit=max&dpr=2&s=4231a3653de66064511d49de3c53cab2","width":1240},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=605&quality=85&auto=format&fit=max&s=39b6adcc54429e7a4dd590c2b7877ec2","width":605},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=605&quality=45&auto=format&fit=max&dpr=2&s=1f297e49336537c7e5157d9d416ffac2","width":1210},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=445&quality=85&auto=format&fit=max&s=d5f37a7a3650ec5da811c236a7abdbf6","width":445},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=445&quality=45&auto=format&fit=max&dpr=2&s=d1922624b421e091edc9f6a0115f56fc","width":890}]},{"weighting":"immersive","srcSet":[{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=1900&quality=85&auto=format&fit=max&s=3df2b3d99ac48015a33695a5e9e9ef88","width":1900},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=1900&quality=45&auto=format&fit=max&dpr=2&s=12f3af40e20a65b4f23f39f7ed42740c","width":3800},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=1300&quality=85&auto=format&fit=max&s=e71de1edb1e3d993a6bd362ad6228f7a","width":1300},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=1300&quality=45&auto=format&fit=max&dpr=2&s=174ea12bf2e7a8de56bb7edebc2022c1","width":2600},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=1140&quality=85&auto=format&fit=max&s=1b221bf95513e528aafd6acdf13505ef","width":1140},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=1140&quality=45&auto=format&fit=max&dpr=2&s=558dfbe77d5ed973bd3f3d2263c094fe","width":2280},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=980&quality=85&auto=format&fit=max&s=a5473f9c899a5f4e3acc6dc712fea0cd","width":980},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=980&quality=45&auto=format&fit=max&dpr=2&s=d6f57fec69ae2c8edc4c254719b2f3c1","width":1960},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=740&quality=85&auto=format&fit=max&s=3d4bc374a0335cfbd9611e51f4b2f031","width":740},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=740&quality=45&auto=format&fit=max&dpr=2&s=99ad48516121fac5be3d5acaee199366","width":1480},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=660&quality=85&auto=format&fit=max&s=fca2c4b031ffe47529e169c42a9cc882","width":660},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=660&quality=45&auto=format&fit=max&dpr=2&s=b674e8284520d2a09b2a73666b6f88fb","width":1320},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=480&quality=85&auto=format&fit=max&s=71a518cb1bcd09ba5f3bd03ca9236cf6","width":480},{"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=480&quality=45&auto=format&fit=max&dpr=2&s=ea617ba45138a014a63b087925a4f016","width":960}]}],"data":{"alt":"A CloudWatch graph showing the number of connections to the database remaining stable after multiple interruptions","caption":"A CloudWatch graph showing the number of connections to the database remaining stable after multiple interruptions","credit":"Photograph: THE GUARDIAN"}},{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<p>Four fail-overs later, the application always reconnects its 10 connections to the database.</p>","elementId":"c07501e5-f9f1-4a8c-98fa-fe5cccc9b138"},{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<p>No connections are staying in that zombie state: Success!</p>","elementId":"bc9dc884-37e1-4ad0-a7e7-e0beb169cc50"},{"_type":"model.dotcomrendering.pageElements.SubheadingBlockElement","html":"<h2>Conclusion</h2>","elementId":"67ee61e8-dcac-41d8-9f74-c101850fa8b4"},{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<p>Just one line of code or configuration can have a dramatic impact on any production system. In our case, it was really easy to miss. In fact, had I looked for any problem during the review process I wouldn’t have caught the issue - I simply lacked the knowledge to spot it in the first place. This seemingly innocuous settings sits right on the edge between already complex subjects such as TCP, Connection Pools, RDS and DNS.</p>","elementId":"e8e2931e-9907-49a1-96e0-306edda49385"},{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<p>I hope that by sharing my thoughts and learnings here you might have a second look at how your connection pool is configured. We certainly did and at least one other application was fixed following this work.</p>","elementId":"bef1cdf7-17e5-4e73-b52f-64f8ac81daf8"}],"attributes":{"pinned":false,"keyEvent":false,"summary":false},"blockCreatedOn":1575290762000,"blockCreatedOnDisplay":"12.46 GMT","blockLastUpdated":1575290429000,"blockLastUpdatedDisplay":"12.40 GMT","blockFirstPublished":1575290762000,"blockFirstPublishedDisplay":"12.46 GMT","blockFirstPublishedDisplayNoTimezone":"12.46","contributors":[],"primaryDateLine":"Mon 2 Dec 2019 12.46 GMT","secondaryDateLine":"Last modified on Thu 12 Nov 2020 16.50 GMT"}],"author":{"byline":"Alex Dufournet"},"byline":"Alex Dufournet","webPublicationDate":"2019-12-02T12:46:02.000Z","webPublicationDateDeprecated":"2019-12-02T12:46:02.000Z","webPublicationDateDisplay":"Mon 2 Dec 2019 12.46 GMT","webPublicationSecondaryDateDisplay":"Last modified on Thu 12 Nov 2020 16.50 GMT","editionLongForm":"UK edition","editionId":"UK","pageId":"info/2019/dec/02/faster-postgresql-connection-recovery","canonicalUrl":"https://www.theguardian.com/info/2019/dec/02/faster-postgresql-connection-recovery","format":{"design":"ArticleDesign","theme":"NewsPillar","display":"StandardDisplay"},"designType":"Article","tags":[{"id":"info/series/engineering-blog","type":"Series","title":"Engineering blog"},{"id":"type/article","type":"Type","title":"Article"},{"id":"profile/alex-dufournet","type":"Contributor","title":"Alex Dufournet"}],"pillar":"news","isLegacyInteractive":false,"isImmersive":false,"sectionLabel":"","sectionUrl":"","sectionName":"info","subMetaSectionLinks":[{"url":"/info/series/engineering-blog","title":"Engineering blog"}],"subMetaKeywordLinks":[],"shouldHideAds":false,"isAdFreeUser":false,"webURL":"https://www.theguardian.com/info/2019/dec/02/faster-postgresql-connection-recovery","linkedData":[{"@type":"NewsArticle","@context":"https://schema.org","@id":"https://www.theguardian.com/info/2019/dec/02/faster-postgresql-connection-recovery","publisher":{"@type":"Organization","@context":"https://schema.org","@id":"https://www.theguardian.com#publisher","name":"The Guardian","url":"https://www.theguardian.com/","logo":{"@type":"ImageObject","url":"https://uploads.guim.co.uk/2018/01/31/TheGuardian_AMP.png","width":190,"height":60},"sameAs":["https://www.facebook.com/theguardian","https://twitter.com/guardian","https://www.youtube.com/user/TheGuardian"]},"isAccessibleForFree":true,"isPartOf":{"@type":["CreativeWork","Product"],"name":"The Guardian","productID":"theguardian.com:basic"},"image":["https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=1200&height=630&quality=85&auto=format&fit=crop&overlay-align=bottom%2Cleft&overlay-width=100p&overlay-base64=L2ltZy9zdGF0aWMvb3ZlcmxheXMvdGctYWdlLTIwMTkucG5n&enable=upscale&s=264dd9ec051f7023547b83fa5c26e349","https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=1200&height=1200&quality=85&auto=format&fit=crop&s=508efd555a8c8d75c1d3866e37714bd2","https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=1200&height=900&quality=85&auto=format&fit=crop&s=442264847e1f134e8e0e951ffb0044c5","https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=1200&quality=85&auto=format&fit=max&s=e9682d1d3d20e24bc60c7fd94311bb8a"],"author":[{"@type":"Person","name":"Alex Dufournet","sameAs":"https://www.theguardian.com/profile/alex-dufournet"}],"datePublished":"2019-12-02T12:46:02.000Z","headline":"Faster PostgreSQL connection recovery","dateModified":"2020-11-12T16:50:28.000Z","mainEntityOfPage":"https://www.theguardian.com/info/2019/dec/02/faster-postgresql-connection-recovery"},{"@type":"WebPage","@context":"https://schema.org","@id":"https://www.theguardian.com/info/2019/dec/02/faster-postgresql-connection-recovery","potentialAction":{"@type":"ViewAction","target":"android-app://com.guardian/https/www.theguardian.com/info/2019/dec/02/faster-postgresql-connection-recovery"}}],"openGraphData":{"og:url":"http://www.theguardian.com/info/2019/dec/02/faster-postgresql-connection-recovery","article:author":"https://www.theguardian.com/profile/alex-dufournet","og:image:width":"1200","og:image":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=1200&height=630&quality=85&auto=format&fit=crop&overlay-align=bottom%2Cleft&overlay-width=100p&overlay-base64=L2ltZy9zdGF0aWMvb3ZlcmxheXMvdGctYWdlLTIwMTkucG5n&enable=upscale&s=264dd9ec051f7023547b83fa5c26e349","al:ios:url":"gnmguardian://info/2019/dec/02/faster-postgresql-connection-recovery?contenttype=Article&source=applinks","article:publisher":"https://www.facebook.com/theguardian","og:title":"Faster PostgreSQL connection recovery","fb:app_id":"180444840287","article:modified_time":"2020-11-12T16:50:28.000Z","og:image:height":"720","og:description":"This post covers how a database incident affected one of our services and what we did to improve the situation in the future","og:type":"article","al:ios:app_store_id":"409128287","article:section":"Info","article:published_time":"2019-12-02T12:46:02.000Z","article:tag":"","al:ios:app_name":"The Guardian","og:site_name":"the Guardian"},"twitterData":{"twitter:app:id:iphone":"409128287","twitter:app:name:googleplay":"The Guardian","twitter:app:name:ipad":"The Guardian","twitter:card":"summary_large_image","twitter:app:name:iphone":"The Guardian","twitter:app:id:ipad":"409128287","twitter:app:id:googleplay":"com.guardian","twitter:app:url:googleplay":"guardian://www.theguardian.com/info/2019/dec/02/faster-postgresql-connection-recovery","twitter:app:url:iphone":"gnmguardian://info/2019/dec/02/faster-postgresql-connection-recovery?contenttype=Article&source=twitter","twitter:image":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=1200&height=630&quality=85&auto=format&fit=crop&overlay-align=bottom%2Cleft&overlay-width=100p&overlay-base64=L2ltZy9zdGF0aWMvb3ZlcmxheXMvdGctYWdlLTIwMTkucG5n&s=c827068ff08ebc049d74124198cd66c6","twitter:site":"@guardian","twitter:app:url:ipad":"gnmguardian://info/2019/dec/02/faster-postgresql-connection-recovery?contenttype=Article&source=twitter"},"config":{"switches":{"lightbox":true,"abPrebidKeywords":true,"personaliseSignInGateAfterCheckout":true,"abSignInGateMainVariant":true,"prebidAppnexusUkRow":true,"prebidMagnite":true,"commercialMetrics":true,"prebidTrustx":true,"scAdFreeBanner":false,"adaptiveSite":true,"prebidPermutiveAudience":true,"compareVariantDecision":false,"enableSentryReporting":true,"lazyLoadContainers":true,"ampArticleSwitch":false,"remarketing":true,"articleEndSlot":true,"keyEventsCarousel":true,"registerWithPhone":false,"darkModeWeb":true,"targeting":true,"remoteHeader":true,"slotBodyEnd":true,"ampPrebidOzone":false,"extendedMostPopularFronts":true,"emailInlineInFooter":true,"showNewPrivacyWordingOnEmailSignupEmbeds":true,"prebidAnalytics":true,"extendedMostPopular":true,"ampContentAbTesting":false,"prebidCriteo":true,"okta":true,"imrWorldwide":true,"acast":true,"twitterUwt":true,"abAuxiaSignInGate":false,"abDeferPermutiveLoad":true,"prebidAppnexusInvcode":true,"ampPrebidPubmatic":false,"a9HeaderBidding":true,"prebidAppnexus":true,"enableDiscussionSwitch":true,"prebidXaxis":true,"stickyVideos":true,"interactiveFullHeaderSwitch":true,"discussionAllPageSize":true,"prebidUserSync":true,"audioOnwardJourneySwitch":true,"abMovePermutiveSegmentation":false,"brazeTaylorReport":false,"externalVideoEmbeds":true,"abTheTradeDesk":true,"callouts":true,"sentinelLogger":true,"geoMostPopular":true,"weAreHiring":false,"relatedContent":true,"thirdPartyEmbedTracking":true,"prebidOzone":true,"ampLiveblogSwitch":false,"ampAmazon":false,"prebidAdYouLike":true,"mostViewedFronts":true,"optOutAdvertising":true,"abSignInGateMainControl":true,"googleSearch":true,"abOptOutFrequencyCap":true,"brazeSwitch":true,"prebidKargo":true,"consentManagement":true,"idProfileNavigation":true,"confiantAdVerification":true,"discussionAllowAnonymousRecommendsSwitch":false,"dcrCrosswords":true,"absoluteServerTimes":false,"permutive":true,"comscore":true,"ampPrebidCriteo":false,"prebidTheTradeDesk":true,"loopVideoTest":false,"newsletterOnwards":false,"youtubeIma":true,"webFonts":true,"liveBlogTopSponsorship":true,"abAdBlockAsk":false,"ophan":true,"crosswordSvgThumbnails":true,"prebidTriplelift":true,"prebidPubmatic":true,"serverShareCounts":false,"autoRefresh":true,"enhanceTweets":true,"prebidIndexExchange":true,"prebidOpenx":true,"prebidHeaderBidding":true,"idCookieRefresh":true,"discussionPageSize":true,"smartAppBanner":false,"historyTags":true,"brazeContentCards":true,"remoteBanner":true,"emailSignupRecaptcha":true,"prebidSmart":true,"shouldLoadGoogletag":true,"inizio":true,"europeBetaFront":true},"abTests":{},"googletagUrl":"//securepubads.g.doubleclick.net/tag/js/gpt.js","stage":"PROD","frontendAssetsFullURL":"https://assets.guim.co.uk/","ampIframeUrl":"https://assets.guim.co.uk/data/vendor/2533d5cb94302889e6a8f1b24b5329e7/amp-iframe.html","tones":"","facebookIaAdUnitRoot":"facebook-instant-articles","avatarApiUrl":"https://avatar.theguardian.com","isSplash":false,"isColumn":false,"membershipUrl":"https://membership.theguardian.com","headline":"Faster PostgreSQL connection recovery","isImmersive":false,"author":"Alex Dufournet","ipsosTag":"guardian","isProd":true,"series":"Engineering blog","toneIds":"","membershipAccess":"","allowUserGeneratedContent":false,"commissioningDesks":"","webPublicationDate":1575290762000,"forecastsapiurl":"/weatherapi/forecast","supportUrl":"https://support.theguardian.com","isNumberedList":false,"commercialBundleUrl":"https://assets.guim.co.uk/commercial/47e59a6f2531251d895a/graun.standalone.commercial.js","idOAuthUrl":"https://oauth.theguardian.com","webTitle":"Faster PostgreSQL connection recovery","isPhotoEssay":false,"idWebAppUrl":"https://oauth.theguardian.com","a9PublisherId":"3722","isFront":false,"inBodyInternalLinkCount":1,"googleSearchUrl":"//www.google.co.uk/cse/cse.js","inBodyExternalLinkCount":9,"showRelatedContent":true,"lightboxImages":{"id":"info/2019/dec/02/faster-postgresql-connection-recovery","headline":"Faster PostgreSQL connection recovery","shouldHideAdverts":false,"standfirst":"<p>This post covers how a database incident affected one of our services and what we did to improve the situation in the future</p>","images":[{"caption":"Ethernet data cables are seen in a server room in Canberra","credit":"Photograph: Mick Tsikas/AAP","displayCredit":true,"src":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=700&quality=85&auto=format&fit=max&s=2660e9d45e301d0b48a86cabc2f21366","srcsets":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=1920&quality=85&auto=format&fit=max&s=140b69dbf688546eca79892394b22f98 1920w, https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=1225&quality=85&auto=format&fit=max&s=a8d8d9862bee2ed2d42f78f5123a7ac5 1225w, https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=1065&quality=85&auto=format&fit=max&s=44b1c2ad36d023f41988011fb1fbd363 1065w, https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=965&quality=85&auto=format&fit=max&s=aada3d905614269608e4805601fcc289 965w, https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=725&quality=85&auto=format&fit=max&s=9b457c8551edd8c042912ef1d6b01d8e 725w, https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=645&quality=85&auto=format&fit=max&s=38b286fcf1f4526f561c9cc51031b70c 645w, https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/master/4744.jpg?width=465&quality=85&auto=format&fit=max&s=06d3bad6000ee6e29079763a8d31ac1c 465w","sizes":"(min-width: 1300px) 1920px, (min-width: 1140px) 1225px, (min-width: 980px) 1065px, (min-width: 740px) 965px, (min-width: 660px) 725px, (min-width: 480px) 645px, 465px","ratio":1.6663154197400774,"role":"None","parentContentId":"info/2019/dec/02/faster-postgresql-connection-recovery","id":"info/2019/dec/02/faster-postgresql-connection-recovery"},{"caption":"The AWS console offers an option to reboot a database instance with a fail-over","credit":"Photograph: THE GUARDIAN","displayCredit":true,"src":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=700&quality=85&auto=format&fit=max&s=daec697c22b134644f6d025282799a9e","srcsets":"https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=1920&quality=85&auto=format&fit=max&s=d8f9bf30f0106e1161a4c34e50c89b09 1920w, https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=1225&quality=85&auto=format&fit=max&s=55d056a581a009b8e82996fea2c88af3 1225w, https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=1065&quality=85&auto=format&fit=max&s=adec2f7b61bc8d6cf1a226b33553ad03 1065w, https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=965&quality=85&auto=format&fit=max&s=44522af9a846cacc1d2a9d85ece3d6be 965w, https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=725&quality=85&auto=format&fit=max&s=121e455298b8c80f238956486efaec58 725w, https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=645&quality=85&auto=format&fit=max&s=3ae7027b140d36321c2fe6deb545bc54 645w, https://i.guim.co.uk/img/media/05cea496b5fe95ca24b40020c666c01c2c2feb73/0_0_1680_558/master/1680.jpg?width=465&quality=85&auto=format&fit=max&s=479d95a9dcfcec1db469c041327c6838 465w","sizes":"(min-width: 1300px) 1920px, (min-width: 1140px) 1225px, (min-width: 980px) 1065px, (min-width: 740px) 965px, (min-width: 660px) 725px, (min-width: 480px) 645px, 465px","ratio":3.010752688172043,"role":"None","parentContentId":"info/2019/dec/02/faster-postgresql-connection-recovery","id":"info/2019/dec/02/faster-postgresql-connection-recovery"},{"caption":"A CloudWatch graph showing the number of connections to the database going down","credit":"Photograph: THE GUARDIAN","displayCredit":true,"src":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=700&quality=85&auto=format&fit=max&s=a0aa3bbe6f10351f5a6c41ace19eabec","srcsets":"https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=1920&quality=85&auto=format&fit=max&s=65db21b7fe99c826a0d57a4476a49f13 1920w, https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=1225&quality=85&auto=format&fit=max&s=6fac0e3e1a6b20dea7715ccaaf39a7b3 1225w, https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=1065&quality=85&auto=format&fit=max&s=c2af18c9dfa849decdeeaea9410512d9 1065w, https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=965&quality=85&auto=format&fit=max&s=b70062bd2ebca2bfdae973f6cb9813d9 965w, https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=725&quality=85&auto=format&fit=max&s=70ca44066f5e4566dd07c29ba50e2877 725w, https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=645&quality=85&auto=format&fit=max&s=7f6d01d51c7a48e7ea2508acc9f8115d 645w, https://i.guim.co.uk/img/media/aaed4989666df4a2a81a3d15f1e29609bd2ab52a/0_0_1780_324/master/1780.jpg?width=465&quality=85&auto=format&fit=max&s=75a7df50503ff628d321a44517e1071f 465w","sizes":"(min-width: 1300px) 1920px, (min-width: 1140px) 1225px, (min-width: 980px) 1065px, (min-width: 740px) 965px, (min-width: 660px) 725px, (min-width: 480px) 645px, 465px","ratio":5.493827160493828,"role":"None","parentContentId":"info/2019/dec/02/faster-postgresql-connection-recovery","id":"info/2019/dec/02/faster-postgresql-connection-recovery"},{"caption":"Setting the socket timeout on a Hikari connection pool","credit":"Photograph: THE GUARDIAN","displayCredit":true,"src":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=700&quality=85&auto=format&fit=max&s=a701305ea73bc74bb089ca6f628f0a3c","srcsets":"https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=1920&quality=85&auto=format&fit=max&s=e83d952c630669db1b879a78041d9c97 1920w, https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=1225&quality=85&auto=format&fit=max&s=aa1d1fc37d2e0d660dcfe168ca16d463 1225w, https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=1065&quality=85&auto=format&fit=max&s=cc59c982c517ab4416576ec3da6ff064 1065w, https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=965&quality=85&auto=format&fit=max&s=373efdd7c0f586d2254f708f7ec0012b 965w, https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=725&quality=85&auto=format&fit=max&s=e9f891b18280711d3917df29c1c6f20d 725w, https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=645&quality=85&auto=format&fit=max&s=e2f5099415b238439639574e0a4024b0 645w, https://i.guim.co.uk/img/media/8568406d461341f7e83e5b53f92e842e0fa3eb1c/0_0_1142_168/master/1142.jpg?width=465&quality=85&auto=format&fit=max&s=05ea2ba4eb7af37ad60cbe7c898354b6 465w","sizes":"(min-width: 1300px) 1920px, (min-width: 1140px) 1225px, (min-width: 980px) 1065px, (min-width: 740px) 965px, (min-width: 660px) 725px, (min-width: 480px) 645px, 465px","ratio":6.7976190476190474,"role":"None","parentContentId":"info/2019/dec/02/faster-postgresql-connection-recovery","id":"info/2019/dec/02/faster-postgresql-connection-recovery"},{"caption":"A CloudWatch graph showing the number of connections to the database remaining stable after multiple interruptions","credit":"Photograph: THE GUARDIAN","displayCredit":true,"src":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=700&quality=85&auto=format&fit=max&s=16894287b5330ec533d2fa0ea6ee59d3","srcsets":"https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=1920&quality=85&auto=format&fit=max&s=12f960e57a72ac5a593a1645af08b064 1920w, https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=1225&quality=85&auto=format&fit=max&s=049160ce61824a63d8caa25a236e9a78 1225w, https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=1065&quality=85&auto=format&fit=max&s=713b9a33ff4eea98c967f5180d3354db 1065w, https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=965&quality=85&auto=format&fit=max&s=c8476fedeaa59bec34746d70e2d6c4b3 965w, https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=725&quality=85&auto=format&fit=max&s=3dde87c261ea3f3162e88b45af79966b 725w, https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=645&quality=85&auto=format&fit=max&s=93707c93834271d96064ea89f6736735 645w, https://i.guim.co.uk/img/media/07013f25f42739e1b02e383601696d2c8e3cfc33/0_0_1680_368/master/1680.jpg?width=465&quality=85&auto=format&fit=max&s=b8043b8db15af25c1210479dc6c8aa36 465w","sizes":"(min-width: 1300px) 1920px, (min-width: 1140px) 1225px, (min-width: 980px) 1065px, (min-width: 740px) 965px, (min-width: 660px) 725px, (min-width: 480px) 645px, 465px","ratio":4.565217391304348,"role":"None","parentContentId":"info/2019/dec/02/faster-postgresql-connection-recovery","id":"info/2019/dec/02/faster-postgresql-connection-recovery"}]},"googleSearchId":"007466294097402385199:m2ealvuxh1i","shouldHideReaderRevenue":false,"idUrl":"https://profile.theguardian.com","hasSurveyAd":false,"omnitureAmpAccount":"guardiangu-thirdpartyapps","dfpAdUnitRoot":"theguardian.com","host":"https://www.theguardian.com","blogIds":"","sectionName":"Info","hasMultipleVideosInPage":false,"hasShowcaseMainElement":false,"googleRecaptchaSiteKey":"6LdzlmsdAAAAALFH63cBVagSFPuuHXQ9OfpIDdMc","fbAppId":"180444840287","isContent":true,"shortUrlId":"/p/cf7h2","dfpAccountId":"59666047","plistaPublicApiKey":"462925f4f131001fd974bebe","wordCount":1349,"hasLiveBlogTopAd":false,"dcrSentryDsn":"https://1937ab71c8804b2b8438178dfdd6468f@sentry.io/1377847","cardStyle":"news","adUnit":"/59666047/theguardian.com/info/article/ng","discussionApiUrl":"https://discussion.theguardian.com/discussion-api","isSensitive":false,"ophanEmbedJsUrl":"//j.ophan.co.uk/ophan.embed","edition":"UK","brazeApiKey":"7f28c639-8bda-48ff-a3f6-24345abfc07c","blogs":"","discussionApiClientHeader":"nextgen","section":"info","userAttributesApiUrl":"https://members-data-api.theguardian.com/user-attributes","videoDuration":0,"dfpHost":"pubads.g.doubleclick.net","weatherapiurl":"/weatherapi/city","sentryPublicApiKey":"344003a8d11c41d8800fbad8383fdc50","shortUrl":"https://www.theguardian.com/p/cf7h2","thumbnail":"https://i.guim.co.uk/img/media/082018d5f58ee662b9b3f15ac91a73a67905deb2/0_92_4744_2847/500.jpg?quality=85&auto=format&fit=max&s=b1b5bb968dee4cb55e44882c630e52ea","pillar":"News","pageId":"info/2019/dec/02/faster-postgresql-connection-recovery","references":[],"beaconUrl":"//phar.gu-web.net","commentable":false,"discussionD2Uid":"zHoBy6HNKsk","ophanJsUrl":"//j.ophan.co.uk/ophan.ng","contributorBio":"","keywordIds":"","contentType":"Article","isDev":false,"isHosted":false,"isAdFree":false,"stripePublicToken":"pk_live_2O6zPMHXNs2AGea4bAmq5R7Z","omnitureAccount":"guardiangu-network","locationapiurl":"/weatherapi/locations?query=","authorIds":"profile/alex-dufournet","isPaidContent":false,"hasYouTubeAtom":false,"externalEmbedHost":"https://embed.theguardian.com","thirdPartyAppsAccount":"guardiangu-thirdpartyapps","ajaxUrl":"https://api.nextgen.guardianapps.co.uk","byline":"Alex Dufournet","keywords":"","contentId":"info/2019/dec/02/faster-postgresql-connection-recovery","nonKeywordTagIds":"info/series/engineering-blog,type/article,profile/alex-dufournet","mobileAppsAdUnitRoot":"beta-guardian-app","hasPageSkin":false,"requiresMembershipAccess":false,"seriesTags":"Engineering blog","revisionNumber":"DEV","seriesId":"info/series/engineering-blog","optimizeEpicUrl":"https://support.theguardian.com/epic/control/index.html","assetsPath":"https://assets.guim.co.uk/","mmaUrl":"https://manage.theguardian.com","isLive":false,"richLink":"","campaigns":[],"isLiveBlog":false,"pageCode":"6678101","avatarImagesUrl":"https://avatar.guim.co.uk","publication":"theguardian.com","sentryHost":"app.getsentry.com/35463","buildNumber":"DEV","atomTypes":{"review":false,"guide":true,"audio":false,"explainer":false,"interactive":false,"profile":false,"chart":false,"quizz":false,"commonsdivision":false,"timeline":false,"media":false,"qanda":false},"userBenefitsApiUrl":"https://user-benefits.guardianapis.com/benefits/me","sharedAdTargeting":{"se":["engineering-blog"],"ct":"article","su":["0"],"edition":"uk","p":"ng","sh":"https://www.theguardian.com/p/cf7h2","co":["alex-dufournet"],"url":"/info/2019/dec/02/faster-postgresql-connection-recovery"},"onwardWebSocket":"ws://api.nextgen.guardianapps.co.uk/recently-published","productionOffice":"Uk","shouldHideAdverts":false,"idApiUrl":"https://idapi.theguardian.com","pbIndexSites":[{"bp":"D","id":208247},{"bp":"M","id":213519},{"bp":"T","id":215454}],"googletagJsUrl":"//securepubads.g.doubleclick.net/tag/js/gpt.js","atoms":["cfee56d3-053e-46e7-9d03-ec0704b3d476"],"calloutsUrl":"https://callouts.guardianapis.com/formstack-campaign/submit","isPreview":false},"guardianBaseURL":"https://www.theguardian.com","contentType":"Article","hasRelated":true,"hasStoryPackage":false,"beaconURL":"//phar.gu-web.net","isCommentable":false,"commercialProperties":{"US":{"adTargeting":[{"name":"su","value":["0"]},{"name":"edition","value":"us"},{"name":"ct","value":"article"},{"name":"sh","value":"https://www.theguardian.com/p/cf7h2"},{"name":"url","value":"/info/2019/dec/02/faster-postgresql-connection-recovery"},{"name":"co","value":["alex-dufournet"]},{"name":"se","value":["engineering-blog"]},{"name":"p","value":"ng"}]},"AU":{"adTargeting":[{"name":"su","value":["0"]},{"name":"edition","value":"au"},{"name":"ct","value":"article"},{"name":"sh","value":"https://www.theguardian.com/p/cf7h2"},{"name":"url","value":"/info/2019/dec/02/faster-postgresql-connection-recovery"},{"name":"co","value":["alex-dufournet"]},{"name":"se","value":["engineering-blog"]},{"name":"p","value":"ng"}]},"UK":{"adTargeting":[{"name":"su","value":["0"]},{"name":"edition","value":"uk"},{"name":"ct","value":"article"},{"name":"sh","value":"https://www.theguardian.com/p/cf7h2"},{"name":"url","value":"/info/2019/dec/02/faster-postgresql-connection-recovery"},{"name":"co","value":["alex-dufournet"]},{"name":"se","value":["engineering-blog"]},{"name":"p","value":"ng"}]},"INT":{"adTargeting":[{"name":"su","value":["0"]},{"name":"ct","value":"article"},{"name":"sh","value":"https://www.theguardian.com/p/cf7h2"},{"name":"url","value":"/info/2019/dec/02/faster-postgresql-connection-recovery"},{"name":"co","value":["alex-dufournet"]},{"name":"edition","value":"int"},{"name":"se","value":["engineering-blog"]},{"name":"p","value":"ng"}]},"EUR":{"adTargeting":[{"name":"su","value":["0"]},{"name":"ct","value":"article"},{"name":"sh","value":"https://www.theguardian.com/p/cf7h2"},{"name":"edition","value":"eur"},{"name":"url","value":"/info/2019/dec/02/faster-postgresql-connection-recovery"},{"name":"co","value":["alex-dufournet"]},{"name":"se","value":["engineering-blog"]},{"name":"p","value":"ng"}]}},"pageType":{"hasShowcaseMainElement":false,"isFront":false,"isLiveblog":false,"isMinuteArticle":false,"isPaidContent":false,"isPreview":false,"isSensitive":false},"trailText":"This post covers how a database incident affected one of our services and what we did to improve the situation in the future","nav":{"currentUrl":"/info","pillars":[{"title":"News","url":"/","longTitle":"Headlines","iconName":"home","children":[{"title":"UK","url":"/uk-news","longTitle":"UK news","children":[{"title":"UK politics","url":"/politics"},{"title":"Education","url":"/education","children":[{"title":"Schools","url":"/education/schools"},{"title":"Teachers","url":"/teacher-network"},{"title":"Universities","url":"/education/universities"},{"title":"Students","url":"/education/students"}]},{"title":"Media","url":"/media"},{"title":"Society","url":"/society"},{"title":"Law","url":"/law"},{"title":"Scotland","url":"/uk/scotland"},{"title":"Wales","url":"/uk/wales"},{"title":"Northern Ireland","url":"/uk/northernireland"}]},{"title":"US politics","url":"/us-news/us-politics"},{"title":"World","url":"/world","longTitle":"World news","children":[{"title":"Europe","url":"/world/europe-news"},{"title":"US","url":"/us-news","longTitle":"US news"},{"title":"Americas","url":"/world/americas"},{"title":"Asia","url":"/world/asia"},{"title":"Australia","url":"/australia-news","longTitle":"Australia news"},{"title":"Middle East","url":"/world/middleeast"},{"title":"Africa","url":"/world/africa"},{"title":"Inequality","url":"/inequality"},{"title":"Global development","url":"/global-development"}]},{"title":"Climate crisis","url":"/environment/climate-crisis"},{"title":"Middle East","url":"/world/middleeast"},{"title":"Ukraine","url":"/world/ukraine"},{"title":"Football","url":"/football","children":[{"title":"Live scores","url":"/football/live","longTitle":"football/live"},{"title":"Tables","url":"/football/tables","longTitle":"football/tables"},{"title":"Fixtures","url":"/football/fixtures","longTitle":"football/fixtures"},{"title":"Results","url":"/football/results","longTitle":"football/results"},{"title":"Competitions","url":"/football/competitions","longTitle":"football/competitions"},{"title":"Clubs","url":"/football/teams","longTitle":"football/teams"}]},{"title":"Newsletters","url":"/email-newsletters"},{"title":"Business","url":"/business","children":[{"title":"Economics","url":"/business/economics"},{"title":"Banking","url":"/business/banking"},{"title":"Money","url":"/money","children":[{"title":"Property","url":"/money/property"},{"title":"Pensions","url":"/money/pensions"},{"title":"Savings","url":"/money/savings"},{"title":"Borrowing","url":"/money/debt"},{"title":"Careers","url":"/money/work-and-careers"}]},{"title":"Markets","url":"/business/stock-markets"},{"title":"Project Syndicate","url":"/business/series/project-syndicate-economists"},{"title":"B2B","url":"/business-to-business"},{"title":"Retail","url":"/business/retail"}]},{"title":"Environment","url":"/environment","children":[{"title":"Climate crisis","url":"/environment/climate-crisis"},{"title":"Wildlife","url":"/environment/wildlife"},{"title":"Energy","url":"/environment/energy"},{"title":"Pollution","url":"/environment/pollution"}]},{"title":"UK politics","url":"/politics"},{"title":"Society","url":"/society"},{"title":"Science","url":"/science"},{"title":"Tech","url":"/technology"},{"title":"Global development","url":"/global-development"},{"title":"Obituaries","url":"/obituaries"}]},{"title":"Opinion","url":"/commentisfree","longTitle":"Opinion home","iconName":"home","children":[{"title":"The Guardian view","url":"/profile/editorial"},{"title":"Columnists","url":"/index/contributors"},{"title":"Cartoons","url":"/tone/cartoons"},{"title":"Opinion videos","url":"/type/video+tone/comment"},{"title":"Letters","url":"/tone/letters"}]},{"title":"Sport","url":"/sport","longTitle":"Sport home","iconName":"home","children":[{"title":"Football","url":"/football","children":[{"title":"Live scores","url":"/football/live","longTitle":"football/live"},{"title":"Tables","url":"/football/tables","longTitle":"football/tables"},{"title":"Fixtures","url":"/football/fixtures","longTitle":"football/fixtures"},{"title":"Results","url":"/football/results","longTitle":"football/results"},{"title":"Competitions","url":"/football/competitions","longTitle":"football/competitions"},{"title":"Clubs","url":"/football/teams","longTitle":"football/teams"}]},{"title":"Cricket","url":"/sport/cricket"},{"title":"Rugby union","url":"/sport/rugby-union"},{"title":"Tennis","url":"/sport/tennis"},{"title":"Cycling","url":"/sport/cycling"},{"title":"F1","url":"/sport/formulaone"},{"title":"Golf","url":"/sport/golf"},{"title":"Boxing","url":"/sport/boxing"},{"title":"Rugby league","url":"/sport/rugbyleague"},{"title":"Racing","url":"/sport/horse-racing"},{"title":"US sports","url":"/sport/us-sport"}]},{"title":"Culture","url":"/culture","longTitle":"Culture home","iconName":"home","children":[{"title":"Film","url":"/film"},{"title":"Music","url":"/music"},{"title":"TV & radio","url":"/tv-and-radio"},{"title":"Books","url":"/books"},{"title":"Art & design","url":"/artanddesign"},{"title":"Stage","url":"/stage"},{"title":"Games","url":"/games"},{"title":"Classical","url":"/music/classicalmusicandopera"}]},{"title":"Lifestyle","url":"/lifeandstyle","longTitle":"Lifestyle home","iconName":"home","children":[{"title":"The Filter","url":"/uk/thefilter"},{"title":"Fashion","url":"/fashion"},{"title":"Food","url":"/food"},{"title":"Recipes","url":"/tone/recipes"},{"title":"Travel","url":"/travel","children":[{"title":"UK","url":"/travel/uk"},{"title":"Europe","url":"/travel/europe"},{"title":"US","url":"/travel/usa"}]},{"title":"Health & fitness","url":"/lifeandstyle/health-and-wellbeing"},{"title":"Women","url":"/lifeandstyle/women"},{"title":"Men","url":"/lifeandstyle/men"},{"title":"Love & sex","url":"/lifeandstyle/love-and-sex"},{"title":"Beauty","url":"/fashion/beauty"},{"title":"Home & garden","url":"/lifeandstyle/home-and-garden"},{"title":"Money","url":"/money","children":[{"title":"Property","url":"/money/property"},{"title":"Pensions","url":"/money/pensions"},{"title":"Savings","url":"/money/savings"},{"title":"Borrowing","url":"/money/debt"},{"title":"Careers","url":"/money/work-and-careers"}]},{"title":"Cars","url":"/technology/motoring"}]}],"otherLinks":[{"title":"The Guardian app","url":"https://app.adjust.com/16xt6hai"},{"title":"Video","url":"/video"},{"title":"Podcasts","url":"/podcasts"},{"title":"Pictures","url":"/inpictures"},{"title":"Newsletters","url":"/email-newsletters"},{"title":"Today's paper","url":"/theguardian","children":[{"title":"Obituaries","url":"/obituaries"},{"title":"G2","url":"/theguardian/g2"},{"title":"Journal","url":"/theguardian/journal"},{"title":"Saturday","url":"/theguardian/saturday"}]},{"title":"Inside the Guardian","url":"https://www.theguardian.com/insidetheguardian"},{"title":"The Observer","url":"/observer","children":[{"title":"Comment","url":"/theobserver/news/comment"},{"title":"The New Review","url":"/theobserver/new-review"},{"title":"Observer Magazine","url":"/theobserver/magazine"},{"title":"Observer Food Monthly","url":"/theobserver/foodmonthly"}]},{"title":"Guardian Weekly","url":"https://www.theguardian.com/weekly?INTCMP=gdnwb_mawns_editorial_gweekly_GW_TopNav_UK"},{"title":"Crosswords","url":"/crosswords","children":[{"title":"Blog","url":"/crosswords/crossword-blog"},{"title":"Quick","url":"/crosswords/series/quick"},{"title":"Speedy","url":"/crosswords/series/speedy"},{"title":"Quick cryptic","url":"/crosswords/series/quick-cryptic"},{"title":"Everyman","url":"/crosswords/series/everyman"},{"title":"Quiptic","url":"/crosswords/series/quiptic"},{"title":"Cryptic","url":"/crosswords/series/cryptic"},{"title":"Prize","url":"/crosswords/series/prize"},{"title":"Azed","url":"/crosswords/series/azed"},{"title":"Genius","url":"/crosswords/series/genius"},{"title":"Weekend","url":"/crosswords/series/weekend-crossword"},{"title":"Special","url":"/crosswords/series/special"}]},{"title":"Wordiply","url":"https://www.wordiply.com"},{"title":"Corrections","url":"/theguardian/series/corrections-and-clarifications"}],"brandExtensions":[{"title":"Search jobs","url":"https://jobs.theguardian.com"},{"title":"Hire with Guardian Jobs","url":"https://recruiters.theguardian.com/?utm_source=gdnwb&utm_medium=navbar&utm_campaign=Guardian_Navbar_Recruiters&CMP_TU=trdmkt&CMP_BUNIT=jobs"},{"title":"Holidays","url":"https://holidays.theguardian.com?INTCMP=holidays_uk_web_newheader"},{"title":"Live events","url":"https://www.theguardian.com/guardian-live-events?INTCMP=live_uk_header_dropdown"},{"title":"About Us","url":"/about"},{"title":"Digital Archive","url":"https://theguardian.newspapers.com"},{"title":"Guardian Print Shop","url":"/artanddesign/series/gnm-print-sales"},{"title":"Patrons","url":"https://patrons.theguardian.com/?INTCMP=header_patrons"},{"title":"Guardian Licensing","url":"https://licensing.theguardian.com/"}],"readerRevenueLinks":{"header":{"contribute":"https://support.theguardian.com/contribute?INTCMP=header_support_contribute&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_HEADER%22,%22componentId%22:%22header_support_contribute%22%7D","subscribe":"https://support.theguardian.com/subscribe?INTCMP=header_support_subscribe&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_HEADER%22,%22componentId%22:%22header_support_subscribe%22%7D","support":"https://support.theguardian.com?INTCMP=header_support&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_HEADER%22,%22componentId%22:%22header_support%22%7D","supporter":"https://support.theguardian.com/subscribe?INTCMP=header_supporter_cta&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_HEADER%22,%22componentId%22:%22header_supporter_cta%22%7D"},"footer":{"contribute":"https://support.theguardian.com/contribute?INTCMP=footer_support_contribute&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_FOOTER%22,%22componentId%22:%22footer_support_contribute%22%7D","subscribe":"https://support.theguardian.com/subscribe?INTCMP=footer_support_subscribe&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_FOOTER%22,%22componentId%22:%22footer_support_subscribe%22%7D","support":"https://support.theguardian.com?INTCMP=footer_support&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_FOOTER%22,%22componentId%22:%22footer_support%22%7D","supporter":"https://support.theguardian.com/subscribe?INTCMP=footer_supporter_cta&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_FOOTER%22,%22componentId%22:%22footer_supporter_cta%22%7D"},"sideMenu":{"contribute":"https://support.theguardian.com/contribute?INTCMP=side_menu_support_contribute&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_HEADER%22,%22componentId%22:%22side_menu_support_contribute%22%7D","subscribe":"https://support.theguardian.com/subscribe?INTCMP=side_menu_support_subscribe&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_HEADER%22,%22componentId%22:%22side_menu_support_subscribe%22%7D","support":"https://support.theguardian.com?INTCMP=side_menu_support&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_HEADER%22,%22componentId%22:%22side_menu_support%22%7D","supporter":"https://support.theguardian.com/subscribe?INTCMP=mobilenav_print_cta&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_HEADER%22,%22componentId%22:%22mobilenav_print_cta%22%7D"},"ampHeader":{"contribute":"https://support.theguardian.com/contribute?INTCMP=header_support_contribute&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_HEADER%22,%22componentId%22:%22header_support_contribute%22%7D","subscribe":"https://support.theguardian.com/subscribe?INTCMP=header_support_subscribe&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_HEADER%22,%22componentId%22:%22header_support_subscribe%22%7D","support":"https://support.theguardian.com?INTCMP=amp_header_support&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_HEADER%22,%22componentId%22:%22amp_header_support%22%7D","supporter":"https://support.theguardian.com/subscribe?INTCMP=header_supporter_cta&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_HEADER%22,%22componentId%22:%22header_supporter_cta%22%7D"},"ampFooter":{"contribute":"https://support.theguardian.com/contribute?INTCMP=amp_footer_support_contribute&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_FOOTER%22,%22componentId%22:%22amp_footer_support_contribute%22%7D","subscribe":"https://support.theguardian.com/subscribe?INTCMP=amp_footer_support_subscribe&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_FOOTER%22,%22componentId%22:%22amp_footer_support_subscribe%22%7D","support":"https://support.theguardian.com?INTCMP=footer_support&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_FOOTER%22,%22componentId%22:%22footer_support%22%7D","supporter":"https://support.theguardian.com/subscribe?INTCMP=amp_footer_supporter_cta&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_FOOTER%22,%22componentId%22:%22amp_footer_supporter_cta%22%7D"}}},"showBottomSocialButtons":true,"pageFooter":{"footerLinks":[[{"text":"About us","url":"/about","dataLinkName":"uk : footer : about us","extraClasses":""},{"text":"Help","url":"https://manage.theguardian.com/help-centre","dataLinkName":"uk : footer : tech feedback","extraClasses":"js-tech-feedback-report"},{"text":"Complaints & corrections","url":"/info/complaints-and-corrections","dataLinkName":"complaints","extraClasses":""},{"text":"SecureDrop","url":"https://www.theguardian.com/securedrop","dataLinkName":"securedrop","extraClasses":""},{"text":"Work for us","url":"https://workforus.theguardian.com","dataLinkName":"uk : footer : work for us","extraClasses":""},{"text":"Privacy policy","url":"/info/privacy","dataLinkName":"privacy","extraClasses":""},{"text":"Cookie policy","url":"/info/cookies","dataLinkName":"cookie","extraClasses":""},{"text":"Terms & conditions","url":"/help/terms-of-service","dataLinkName":"terms","extraClasses":""},{"text":"Contact us","url":"/help/contact-us","dataLinkName":"uk : footer : contact us","extraClasses":""}],[{"text":"All topics","url":"/index/subjects/a","dataLinkName":"uk : footer : all topics","extraClasses":""},{"text":"All writers","url":"/index/contributors","dataLinkName":"uk : footer : all contributors","extraClasses":""},{"text":"Modern Slavery Act","url":"https://uploads.guim.co.uk/2024/09/04/Modern_Slavery_Statement_2024_.pdf","dataLinkName":"uk : footer : modern slavery act statement","extraClasses":""},{"text":"Tax strategy","url":"https://uploads.guim.co.uk/2024/08/27/TAX_STRATEGY_FOR_THE_YEAR_ENDED_31_MARCH_2025.pdf","dataLinkName":"uk : footer : tax strategy","extraClasses":""},{"text":"Digital newspaper archive","url":"https://theguardian.newspapers.com","dataLinkName":"digital newspaper archive","extraClasses":""},{"text":"Facebook","url":"https://www.facebook.com/theguardian","dataLinkName":"uk : footer : facebook","extraClasses":""},{"text":"YouTube","url":"https://www.youtube.com/user/TheGuardian","dataLinkName":"uk : footer : youtube","extraClasses":""},{"text":"Instagram","url":"https://www.instagram.com/guardian","dataLinkName":"uk : footer : instagram","extraClasses":""},{"text":"LinkedIn","url":"https://www.linkedin.com/company/theguardian","dataLinkName":"uk : footer : linkedin","extraClasses":""},{"text":"Newsletters","url":"/email-newsletters?INTCMP=DOTCOM_FOOTER_NEWSLETTER_UK","dataLinkName":"uk : footer : newsletters","extraClasses":""}],[{"text":"Advertise with us","url":"https://advertising.theguardian.com","dataLinkName":"uk : footer : advertise with us","extraClasses":""},{"text":"Guardian Labs","url":"/guardian-labs","dataLinkName":"uk : footer : guardian labs","extraClasses":""},{"text":"Search jobs","url":"https://jobs.theguardian.com","dataLinkName":"uk : footer : jobs","extraClasses":""},{"text":"Patrons","url":"https://patrons.theguardian.com?INTCMP=footer_patrons","dataLinkName":"uk : footer : patrons","extraClasses":""}]]},"publication":"theguardian.com","shouldHideReaderRevenue":false,"slotMachineFlags":"","contributionsServiceUrl":"https://contributions.guardianapis.com","isSpecialReport":false,"showTableOfContents":false,"lang":"en","isRightToLeftLang":false}