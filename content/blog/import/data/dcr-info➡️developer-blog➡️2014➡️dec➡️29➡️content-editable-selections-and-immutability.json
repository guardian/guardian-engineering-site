{"version":3,"headline":"Problems with Selection and Range objects","standfirst":"","webTitle":"Problems with Selection and Range objects","mainMediaElements":[{"displayCredit":true,"_type":"model.dotcomrendering.pageElements.ImageBlockElement","role":"inline","media":{"allImages":[{"index":0,"fields":{"height":"500","width":"498"},"mediaType":"Image","mimeType":"image/jpeg","url":"http://media.guim.co.uk/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg"}]},"elementId":"1d543046-661b-40a7-b064-c8dd25aeae5b","imageSources":[{"weighting":"inline","srcSet":[{"src":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=620&quality=85&auto=format&fit=max&s=f587f35ba9121f46e922416d607b556f","width":620},{"src":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=620&quality=45&auto=format&fit=max&dpr=2&s=7be8c34c6322036ce77556e61e89e321","width":1240},{"src":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=700&quality=85&auto=format&fit=max&s=41444a1ddbacb9a8461e726996bad363","width":700},{"src":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=700&quality=45&auto=format&fit=max&dpr=2&s=1561c190db795863988fcc6eea89ac19","width":1400},{"src":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=620&quality=85&auto=format&fit=max&s=f587f35ba9121f46e922416d607b556f","width":620},{"src":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=620&quality=45&auto=format&fit=max&dpr=2&s=7be8c34c6322036ce77556e61e89e321","width":1240},{"src":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=645&quality=85&auto=format&fit=max&s=a5e5d4d0f725160e17bfdf4ee6751004","width":645},{"src":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=645&quality=45&auto=format&fit=max&dpr=2&s=ee94892ac2d3b0b3aeaf76fda04dc86b","width":1290},{"src":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=465&quality=85&auto=format&fit=max&s=0a9779303097f1657be6554526a5b9b1","width":465},{"src":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=465&quality=45&auto=format&fit=max&dpr=2&s=d322af51f65fb901874dc2618145f124","width":930}]},{"weighting":"thumbnail","srcSet":[]},{"weighting":"supporting","srcSet":[]},{"weighting":"showcase","srcSet":[{"src":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=1020&quality=85&auto=format&fit=max&s=073f1b68cb1a2109cc7bb2769083d6a0","width":1020},{"src":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=1020&quality=45&auto=format&fit=max&dpr=2&s=ed272b02ea6ab1a0a30b6355a9389dd3","width":2040},{"src":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=940&quality=85&auto=format&fit=max&s=c4fe6d9e45ee069c825a25c20fdc3025","width":940},{"src":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=940&quality=45&auto=format&fit=max&dpr=2&s=bf552b319eaf7e217cd06cd1f3568c65","width":1880},{"src":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=700&quality=85&auto=format&fit=max&s=41444a1ddbacb9a8461e726996bad363","width":700},{"src":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=700&quality=45&auto=format&fit=max&dpr=2&s=1561c190db795863988fcc6eea89ac19","width":1400},{"src":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=700&quality=85&auto=format&fit=max&s=41444a1ddbacb9a8461e726996bad363","width":700},{"src":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=700&quality=45&auto=format&fit=max&dpr=2&s=1561c190db795863988fcc6eea89ac19","width":1400},{"src":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=660&quality=85&auto=format&fit=max&s=0860fb5180b5b48cc288f56ae4ab6e98","width":660},{"src":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=660&quality=45&auto=format&fit=max&dpr=2&s=8b98241614fa2984baa5b0048aca9902","width":1320},{"src":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=645&quality=85&auto=format&fit=max&s=a5e5d4d0f725160e17bfdf4ee6751004","width":645},{"src":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=645&quality=45&auto=format&fit=max&dpr=2&s=ee94892ac2d3b0b3aeaf76fda04dc86b","width":1290},{"src":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=465&quality=85&auto=format&fit=max&s=0a9779303097f1657be6554526a5b9b1","width":465},{"src":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=465&quality=45&auto=format&fit=max&dpr=2&s=d322af51f65fb901874dc2618145f124","width":930}]},{"weighting":"halfwidth","srcSet":[]},{"weighting":"immersive","srcSet":[{"src":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=1900&quality=85&auto=format&fit=max&s=afb9e65ff19f2b1509d90d6563d99120","width":1900},{"src":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=1900&quality=45&auto=format&fit=max&dpr=2&s=baaa8856f5caf2b2422a2d392bd31699","width":3800},{"src":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=1300&quality=85&auto=format&fit=max&s=4414b01a08ee78e27a17ff49f7ffc497","width":1300},{"src":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=1300&quality=45&auto=format&fit=max&dpr=2&s=fefa24410bef0129aaf662e743081bd9","width":2600},{"src":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=1140&quality=85&auto=format&fit=max&s=dda306536ffe237c8eb9c2ac4cefca7e","width":1140},{"src":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=1140&quality=45&auto=format&fit=max&dpr=2&s=8ca54526c17f5560fe3fcf833599b4fb","width":2280},{"src":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=980&quality=85&auto=format&fit=max&s=973bb417564c8ed70489d66ae85015d4","width":980},{"src":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=980&quality=45&auto=format&fit=max&dpr=2&s=cb02ecfa905b3257c7fb7339af7c87cf","width":1960},{"src":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=740&quality=85&auto=format&fit=max&s=64c3d62e9b19d5ef7fc963b25b366328","width":740},{"src":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=740&quality=45&auto=format&fit=max&dpr=2&s=6da2c2c64b7fa1c462f99d14b6805e78","width":1480},{"src":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=660&quality=85&auto=format&fit=max&s=0860fb5180b5b48cc288f56ae4ab6e98","width":660},{"src":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=660&quality=45&auto=format&fit=max&dpr=2&s=8b98241614fa2984baa5b0048aca9902","width":1320},{"src":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=480&quality=85&auto=format&fit=max&s=9f41a66d983c4ab7effa9db5b38a50c5","width":480},{"src":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=480&quality=45&auto=format&fit=max&dpr=2&s=c5763c4bb42e20e0ec00956e7e997c51","width":960}]}],"data":{"alt":"Image on immutable and mutable trees","caption":"Immutable trees","credit":"Photograph: Wikimedia"}}],"main":"<figure class=\"element element-image\" data-media-id=\"fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a\"> <img src=\"http://media.guim.co.uk/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg\" alt=\"Image on immutable and mutable trees\" width=\"498\" height=\"500\" class=\"gu-image\" /> <figcaption> <span class=\"element-image__caption\">Immutable trees</span> <span class=\"element-image__credit\">Photograph: Wikimedia</span> </figcaption> </figure>","filterKeyEvents":false,"keyEvents":[],"blocks":[{"id":"5486f9ffe4b05bb5eb71a8e4","elements":[{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<p>Maintaing <a href=\"https://github.com/guardian/scribe\">Scribe</a> for use inside of our internal CMS, results in having to fight with unwieldy browser inconsistencies and issues with immutability vs mutability.</p>","elementId":"bc680afe-9e15-477f-bfce-7bd9e424aa7d"},{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<p>Scribe is a simple wrapper on top of <a href=\"https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Content_Editable\">Content Editable</a>, which is meant to normalise many of the browser inconsistencies that arise in using the specification.</p>","elementId":"f3de4c8c-1012-46da-b5b9-9faea6456546"},{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<p>In order to do this, Scribe patches many of the <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/document.execCommand\">document.execCommand</a> functions by wrapping them in Scribe-defined functions. Once the function has been wrapped, Scribe manipulates the document selection to determine where fragments of HTML should be inserted (if any fragments need to be inserted at all).</p>","elementId":"7c91db3b-6548-4dd3-9d63-31e584c641eb"},{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<p>The best way to illustrate this is to look at the many examples in the Scribe repository. A lot of them rely on obtaining the selection from the Scribe element, doing something with this selection, and then restoring the selection in its original location in the document. Thus Scribe provides the ability to clone and manipulate a browser selection at will. This is incredibly useful for manipulating content inside of the editable container, but can introduce a number of irritating bugs that are hard to track down.</p>","elementId":"acc59bd2-d899-43c8-8cef-04fad115ab7c"},{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<p>The bugs arise (almost inevitably) from the lack of immutability in the document selection.</p>","elementId":"fe771aed-0dbd-4d9c-ac36-3b7bc16dc34c"},{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<p>Currently the code that manipulates the selection markers looks as follows (truncated for simplicity - see the full <a href=\"https://github.com/guardian/scribe/blob/master/src/api/selection.js\">selection API</a> for more)</p>","elementId":"11ba957c-b456-4bd5-bac8-9be7b377593c"},{"_type":"model.dotcomrendering.pageElements.CodeBlockElement","isMandatory":false,"language":"javascript","elementId":"381748d8-dbdb-48ab-b251-44f872c6c723","html":"var range = this.range;\n      if(!range) { return; }\n\n\nvar startMarker = document.createElement('em');\nstartMarker.classList.add('scribe-marker');\nvar endMarker = document.createElement('em');\nendMarker.classList.add('scribe-marker');\n\n// End marker\nvar rangeEnd = this.range.cloneRange();\nrangeEnd.collapse(false);\nrangeEnd.insertNode(endMarker);\n\n// manipulate the range here\n\nthis.selection.removeAllRanges();\nthis.selection.addRange(this.range);"},{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<p>Astute readers will have noticed an inherent problem here. We clone the range to avoid any problems with mutating it, then we remove all ranges on the current selection and put our cloned range back into the DOM. Thus the clone is completely lost. The selection and range are manipulated and altered by Scribe. But how else could this piece of functionality be implemented?</p>","elementId":"d8d1123c-d269-4271-8c68-91a0d7b4e8ff"},{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<p>The <a href=\"http://www.w3.org/TR/selection-api/\">selection</a> and the<a href=\"http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html\"> range</a> specification are currently in draft. There are a lot of issues surrounding them. Notably, how do you clone and replace the range without disrupting the existing selection?</p>","elementId":"ded8577f-c6e0-4c3d-a470-aaaeb5c3eeb3"},{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<p>Dealing with this problem caused a lot of issues recently in our <a href=\"https://github.com/guardian/scribe-plugin-noting\">Noting plugin</a>. Noting uses a <a href=\"https://github.com/Matt-Esch/vdom\">virtual DOM</a> to allow fast manipulation of the cloned range and apply custom logic to the elements within the range.</p>","elementId":"422974bd-ce79-461a-9f27-50ad6d1e144f"},{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<p>It’s difficult to come up with an obvious solution to this problem without saying that everything should just be immutable. DOM elements are essentially just mappings to C++ objects and are therefore subject to all the issues with mutation in C++. This is why libraries like Virtual DOM are so appealing. They allow you to perform DOM mutations outside of the actual DOM and then simply apply a patch from your virtualised DOM to the real DOM.</p>","elementId":"d57b7a15-21fa-4f46-9a99-faac2f5b18e7"},{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<p>Selection and Range issues do not go away by using the latest <a href=\"http://www.scala-js.org/\">new language</a> that compiles to JavaScript. Instead the problem is hidden behind <a href=\"http://en.wikipedia.org/wiki/Foreign_function_interface\">FFI</a> calls. The problem seems to be that JavaScript developers want to use functional programming techniques like laziness and immutability but have to interface with a DOM specification that is based on mutation. It seems that while many programming languages are embracing functional techniques, the DOM spec and JavaScript are happily lagging behind, hence the need for libraries like Virtual DOM.</p>","elementId":"7a472d36-0b76-4c00-a5bf-7571ee231095"},{"_type":"model.dotcomrendering.pageElements.TextBlockElement","html":"<p>JavaScript is a practical language and the DOM is a practical specification. Practicality in the world of web programming seems to come in the form of mutability; Selection and Range are no exception.</p>","elementId":"8f9722e9-1adb-4280-b9df-2d8af251717b"}],"attributes":{"pinned":false,"keyEvent":false,"summary":false},"blockCreatedOn":1419851908000,"blockCreatedOnDisplay":"11.18 GMT","blockLastUpdated":1619183742000,"blockLastUpdatedDisplay":"14.15 BST","blockFirstPublished":1419851908000,"blockFirstPublishedDisplay":"11.18 GMT","blockFirstPublishedDisplayNoTimezone":"11.18","contributors":[],"primaryDateLine":"Mon 29 Dec 2014 11.18 GMT","secondaryDateLine":"Last modified on Fri 23 Apr 2021 14.15 BST"}],"author":{"byline":"Hugo Gibson"},"byline":"Hugo Gibson","webPublicationDate":"2014-12-29T11:18:28.000Z","webPublicationDateDeprecated":"2014-12-29T11:18:28.000Z","webPublicationDateDisplay":"Mon 29 Dec 2014 11.18 GMT","webPublicationSecondaryDateDisplay":"Last modified on Fri 23 Apr 2021 14.15 BST","editionLongForm":"UK edition","editionId":"UK","pageId":"info/developer-blog/2014/dec/29/content-editable-selections-and-immutability","canonicalUrl":"https://www.theguardian.com/info/developer-blog/2014/dec/29/content-editable-selections-and-immutability","format":{"design":"ArticleDesign","theme":"NewsPillar","display":"StandardDisplay"},"designType":"Article","tags":[{"id":"info/series/engineering-blog","type":"Series","title":"Engineering blog"},{"id":"technology/programming","type":"Keyword","title":"Programming"},{"id":"type/article","type":"Type","title":"Article"},{"id":"profile/hugo-gibson","type":"Contributor","title":"Hugo Gibson"}],"pillar":"news","isLegacyInteractive":false,"isImmersive":false,"sectionLabel":"Programming","sectionUrl":"technology/programming","sectionName":"info","subMetaSectionLinks":[{"url":"/technology/programming","title":"Programming"},{"url":"/info/series/engineering-blog","title":"Engineering blog"}],"subMetaKeywordLinks":[],"shouldHideAds":false,"isAdFreeUser":false,"webURL":"https://www.theguardian.com/info/developer-blog/2014/dec/29/content-editable-selections-and-immutability","linkedData":[{"@type":"NewsArticle","@context":"https://schema.org","@id":"https://www.theguardian.com/info/developer-blog/2014/dec/29/content-editable-selections-and-immutability","publisher":{"@type":"Organization","@context":"https://schema.org","@id":"https://www.theguardian.com#publisher","name":"The Guardian","url":"https://www.theguardian.com/","logo":{"@type":"ImageObject","url":"https://uploads.guim.co.uk/2018/01/31/TheGuardian_AMP.png","width":190,"height":60},"sameAs":["https://www.facebook.com/theguardian","https://twitter.com/guardian","https://www.youtube.com/user/TheGuardian"]},"isAccessibleForFree":true,"isPartOf":{"@type":["CreativeWork","Product"],"name":"The Guardian","productID":"theguardian.com:basic"},"image":["https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=1200&height=630&quality=85&auto=format&fit=crop&overlay-align=bottom%2Cleft&overlay-width=100p&overlay-base64=L2ltZy9zdGF0aWMvb3ZlcmxheXMvdGctYWdlLTIwMTQucG5n&enable=upscale&s=b6e9ec58fe0dd56fa0708a877ed817a0","https://assets.guim.co.uk/images/eada8aa27c12fe2d5afa3a89d3fbae0d/fallback-logo.png","https://assets.guim.co.uk/images/eada8aa27c12fe2d5afa3a89d3fbae0d/fallback-logo.png","https://assets.guim.co.uk/images/eada8aa27c12fe2d5afa3a89d3fbae0d/fallback-logo.png"],"author":[{"@type":"Person","name":"Hugo Gibson","sameAs":"https://www.theguardian.com/profile/hugo-gibson"}],"datePublished":"2014-12-29T11:18:28.000Z","headline":"Problems with Selection and Range objects","dateModified":"2021-04-23T13:15:43.000Z","mainEntityOfPage":"https://www.theguardian.com/info/developer-blog/2014/dec/29/content-editable-selections-and-immutability"},{"@type":"WebPage","@context":"https://schema.org","@id":"https://www.theguardian.com/info/developer-blog/2014/dec/29/content-editable-selections-and-immutability","potentialAction":{"@type":"ViewAction","target":"android-app://com.guardian/https/www.theguardian.com/info/developer-blog/2014/dec/29/content-editable-selections-and-immutability"}}],"openGraphData":{"og:url":"http://www.theguardian.com/info/developer-blog/2014/dec/29/content-editable-selections-and-immutability","article:author":"https://www.theguardian.com/profile/hugo-gibson","og:image:width":"1200","og:image":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=1200&height=630&quality=85&auto=format&fit=crop&overlay-align=bottom%2Cleft&overlay-width=100p&overlay-base64=L2ltZy9zdGF0aWMvb3ZlcmxheXMvdGctYWdlLTIwMTQucG5n&enable=upscale&s=b6e9ec58fe0dd56fa0708a877ed817a0","al:ios:url":"gnmguardian://info/developer-blog/2014/dec/29/content-editable-selections-and-immutability?contenttype=Article&source=applinks","article:publisher":"https://www.facebook.com/theguardian","og:title":"Problems with Selection and Range objects","fb:app_id":"180444840287","article:modified_time":"2021-04-23T13:15:43.000Z","og:image:height":"1205","og:description":"Inherent problems with programming in an immutable fashion while using mutable objects.","og:type":"article","al:ios:app_store_id":"409128287","article:section":"Info","article:published_time":"2014-12-29T11:18:28.000Z","article:tag":"Programming","al:ios:app_name":"The Guardian","og:site_name":"the Guardian"},"twitterData":{"twitter:app:id:iphone":"409128287","twitter:app:name:googleplay":"The Guardian","twitter:app:name:ipad":"The Guardian","twitter:card":"summary_large_image","twitter:app:name:iphone":"The Guardian","twitter:app:id:ipad":"409128287","twitter:app:id:googleplay":"com.guardian","twitter:app:url:googleplay":"guardian://www.theguardian.com/info/developer-blog/2014/dec/29/content-editable-selections-and-immutability","twitter:app:url:iphone":"gnmguardian://info/developer-blog/2014/dec/29/content-editable-selections-and-immutability?contenttype=Article&source=twitter","twitter:image":"https://i.guim.co.uk/img/media/fa1a9f573df0df82e8bd45fc9d9c8bf20a488a3a/0_0_610_612/498.jpg?width=1200&height=630&quality=85&auto=format&fit=crop&overlay-align=bottom%2Cleft&overlay-width=100p&overlay-base64=L2ltZy9zdGF0aWMvb3ZlcmxheXMvdGctYWdlLTIwMTQucG5n&s=734c2628f315682b12b82ebe22adb8e7","twitter:site":"@guardian","twitter:app:url:ipad":"gnmguardian://info/developer-blog/2014/dec/29/content-editable-selections-and-immutability?contenttype=Article&source=twitter"},"config":{"switches":{"lightbox":true,"abPrebidKeywords":true,"personaliseSignInGateAfterCheckout":true,"abSignInGateMainVariant":true,"prebidAppnexusUkRow":true,"prebidMagnite":true,"commercialMetrics":true,"prebidTrustx":true,"scAdFreeBanner":false,"adaptiveSite":true,"prebidPermutiveAudience":true,"compareVariantDecision":false,"enableSentryReporting":true,"lazyLoadContainers":true,"ampArticleSwitch":false,"remarketing":true,"articleEndSlot":true,"keyEventsCarousel":true,"registerWithPhone":false,"darkModeWeb":true,"targeting":true,"remoteHeader":true,"slotBodyEnd":true,"ampPrebidOzone":false,"extendedMostPopularFronts":true,"emailInlineInFooter":true,"showNewPrivacyWordingOnEmailSignupEmbeds":true,"prebidAnalytics":true,"extendedMostPopular":true,"ampContentAbTesting":false,"prebidCriteo":true,"okta":true,"imrWorldwide":true,"acast":true,"twitterUwt":true,"abAuxiaSignInGate":false,"abDeferPermutiveLoad":true,"prebidAppnexusInvcode":true,"ampPrebidPubmatic":false,"a9HeaderBidding":true,"prebidAppnexus":true,"enableDiscussionSwitch":true,"prebidXaxis":true,"stickyVideos":true,"interactiveFullHeaderSwitch":true,"discussionAllPageSize":true,"prebidUserSync":true,"audioOnwardJourneySwitch":true,"abMovePermutiveSegmentation":false,"brazeTaylorReport":false,"externalVideoEmbeds":true,"abTheTradeDesk":true,"callouts":true,"sentinelLogger":true,"geoMostPopular":true,"weAreHiring":false,"relatedContent":true,"thirdPartyEmbedTracking":true,"prebidOzone":true,"ampLiveblogSwitch":false,"ampAmazon":false,"prebidAdYouLike":true,"mostViewedFronts":true,"optOutAdvertising":true,"abSignInGateMainControl":true,"googleSearch":true,"abOptOutFrequencyCap":true,"brazeSwitch":true,"prebidKargo":true,"consentManagement":true,"idProfileNavigation":true,"confiantAdVerification":true,"discussionAllowAnonymousRecommendsSwitch":false,"dcrCrosswords":true,"absoluteServerTimes":false,"permutive":true,"comscore":true,"ampPrebidCriteo":false,"prebidTheTradeDesk":true,"loopVideoTest":false,"newsletterOnwards":false,"youtubeIma":true,"webFonts":true,"liveBlogTopSponsorship":true,"abAdBlockAsk":false,"ophan":true,"crosswordSvgThumbnails":true,"prebidTriplelift":true,"prebidPubmatic":true,"serverShareCounts":false,"autoRefresh":true,"enhanceTweets":true,"prebidIndexExchange":true,"prebidOpenx":true,"prebidHeaderBidding":true,"idCookieRefresh":true,"discussionPageSize":true,"smartAppBanner":false,"historyTags":true,"brazeContentCards":true,"remoteBanner":true,"emailSignupRecaptcha":true,"prebidSmart":true,"shouldLoadGoogletag":true,"inizio":true,"europeBetaFront":true},"abTests":{},"googletagUrl":"//securepubads.g.doubleclick.net/tag/js/gpt.js","stage":"PROD","frontendAssetsFullURL":"https://assets.guim.co.uk/","ampIframeUrl":"https://assets.guim.co.uk/data/vendor/2533d5cb94302889e6a8f1b24b5329e7/amp-iframe.html","tones":"","facebookIaAdUnitRoot":"facebook-instant-articles","avatarApiUrl":"https://avatar.theguardian.com","isSplash":false,"isColumn":false,"membershipUrl":"https://membership.theguardian.com","headline":"Problems with Selection and Range objects","isImmersive":false,"author":"Hugo Gibson","ipsosTag":"guardian","isProd":true,"series":"Engineering blog","toneIds":"","membershipAccess":"","allowUserGeneratedContent":false,"commissioningDesks":"","webPublicationDate":1419851908000,"forecastsapiurl":"/weatherapi/forecast","supportUrl":"https://support.theguardian.com","isNumberedList":false,"commercialBundleUrl":"https://assets.guim.co.uk/commercial/47e59a6f2531251d895a/graun.standalone.commercial.js","idOAuthUrl":"https://oauth.theguardian.com","webTitle":"Problems with Selection and Range objects","isPhotoEssay":false,"idWebAppUrl":"https://oauth.theguardian.com","a9PublisherId":"3722","isFront":false,"inBodyInternalLinkCount":0,"googleSearchUrl":"//www.google.co.uk/cse/cse.js","inBodyExternalLinkCount":10,"showRelatedContent":true,"lightboxImages":{"id":"info/developer-blog/2014/dec/29/content-editable-selections-and-immutability","headline":"Problems with Selection and Range objects","shouldHideAdverts":false,"standfirst":"","images":[]},"googleSearchId":"007466294097402385199:m2ealvuxh1i","shouldHideReaderRevenue":false,"idUrl":"https://profile.theguardian.com","hasSurveyAd":false,"omnitureAmpAccount":"guardiangu-thirdpartyapps","dfpAdUnitRoot":"theguardian.com","host":"https://www.theguardian.com","blogIds":"","sectionName":"Info","hasMultipleVideosInPage":false,"hasShowcaseMainElement":false,"googleRecaptchaSiteKey":"6LdzlmsdAAAAALFH63cBVagSFPuuHXQ9OfpIDdMc","fbAppId":"180444840287","isContent":true,"shortUrlId":"/p/443v2","dfpAccountId":"59666047","plistaPublicApiKey":"462925f4f131001fd974bebe","wordCount":585,"hasLiveBlogTopAd":false,"dcrSentryDsn":"https://1937ab71c8804b2b8438178dfdd6468f@sentry.io/1377847","cardStyle":"news","adUnit":"/59666047/theguardian.com/info/article/ng","discussionApiUrl":"https://discussion.theguardian.com/discussion-api","isSensitive":false,"ophanEmbedJsUrl":"//j.ophan.co.uk/ophan.embed","edition":"UK","brazeApiKey":"7f28c639-8bda-48ff-a3f6-24345abfc07c","blogs":"","discussionApiClientHeader":"nextgen","section":"info","userAttributesApiUrl":"https://members-data-api.theguardian.com/user-attributes","videoDuration":0,"dfpHost":"pubads.g.doubleclick.net","weatherapiurl":"/weatherapi/city","sentryPublicApiKey":"344003a8d11c41d8800fbad8383fdc50","shortUrl":"https://www.theguardian.com/p/443v2","thumbnail":false,"pillar":"News","pageId":"info/developer-blog/2014/dec/29/content-editable-selections-and-immutability","references":[],"beaconUrl":"//phar.gu-web.net","commentable":true,"discussionD2Uid":"zHoBy6HNKsk","ophanJsUrl":"//j.ophan.co.uk/ophan.ng","contributorBio":"","keywordIds":"technology/programming","contentType":"Article","isDev":false,"isHosted":false,"isAdFree":false,"stripePublicToken":"pk_live_2O6zPMHXNs2AGea4bAmq5R7Z","omnitureAccount":"guardiangu-network","locationapiurl":"/weatherapi/locations?query=","authorIds":"profile/hugo-gibson","isPaidContent":false,"hasYouTubeAtom":false,"externalEmbedHost":"https://embed.theguardian.com","thirdPartyAppsAccount":"guardiangu-thirdpartyapps","ajaxUrl":"https://api.nextgen.guardianapps.co.uk","byline":"Hugo Gibson","keywords":"Programming","contentId":"info/developer-blog/2014/dec/29/content-editable-selections-and-immutability","nonKeywordTagIds":"info/series/engineering-blog,type/article,profile/hugo-gibson","mobileAppsAdUnitRoot":"beta-guardian-app","hasPageSkin":false,"requiresMembershipAccess":false,"seriesTags":"Engineering blog","revisionNumber":"DEV","seriesId":"info/series/engineering-blog","optimizeEpicUrl":"https://support.theguardian.com/epic/control/index.html","assetsPath":"https://assets.guim.co.uk/","mmaUrl":"https://manage.theguardian.com","isLive":false,"richLink":"","campaigns":[],"isLiveBlog":false,"pageCode":"2206685","avatarImagesUrl":"https://avatar.guim.co.uk","publication":"theguardian.com","sentryHost":"app.getsentry.com/35463","buildNumber":"DEV","userBenefitsApiUrl":"https://user-benefits.guardianapis.com/benefits/me","sharedAdTargeting":{"se":["engineering-blog"],"ct":"article","su":["0"],"edition":"uk","p":"ng","k":["programming"],"sh":"https://www.theguardian.com/p/443v2","co":["hugo-gibson"],"url":"/info/developer-blog/2014/dec/29/content-editable-selections-and-immutability"},"onwardWebSocket":"ws://api.nextgen.guardianapps.co.uk/recently-published","productionOffice":"Uk","shouldHideAdverts":false,"idApiUrl":"https://idapi.theguardian.com","pbIndexSites":[{"bp":"D","id":208247},{"bp":"M","id":213519},{"bp":"T","id":215454}],"googletagJsUrl":"//securepubads.g.doubleclick.net/tag/js/gpt.js","calloutsUrl":"https://callouts.guardianapis.com/formstack-campaign/submit","isPreview":false},"guardianBaseURL":"https://www.theguardian.com","contentType":"Article","hasRelated":true,"hasStoryPackage":false,"beaconURL":"//phar.gu-web.net","isCommentable":true,"commercialProperties":{"US":{"adTargeting":[{"name":"edition","value":"us"},{"name":"ct","value":"article"},{"name":"k","value":["programming"]},{"name":"se","value":["engineering-blog"]},{"name":"p","value":"ng"},{"name":"su","value":["0"]},{"name":"url","value":"/info/developer-blog/2014/dec/29/content-editable-selections-and-immutability"},{"name":"sh","value":"https://www.theguardian.com/p/443v2"},{"name":"co","value":["hugo-gibson"]}]},"AU":{"adTargeting":[{"name":"edition","value":"au"},{"name":"ct","value":"article"},{"name":"k","value":["programming"]},{"name":"se","value":["engineering-blog"]},{"name":"p","value":"ng"},{"name":"su","value":["0"]},{"name":"url","value":"/info/developer-blog/2014/dec/29/content-editable-selections-and-immutability"},{"name":"sh","value":"https://www.theguardian.com/p/443v2"},{"name":"co","value":["hugo-gibson"]}]},"UK":{"adTargeting":[{"name":"edition","value":"uk"},{"name":"ct","value":"article"},{"name":"k","value":["programming"]},{"name":"se","value":["engineering-blog"]},{"name":"p","value":"ng"},{"name":"su","value":["0"]},{"name":"url","value":"/info/developer-blog/2014/dec/29/content-editable-selections-and-immutability"},{"name":"sh","value":"https://www.theguardian.com/p/443v2"},{"name":"co","value":["hugo-gibson"]}]},"INT":{"adTargeting":[{"name":"ct","value":"article"},{"name":"se","value":["engineering-blog"]},{"name":"p","value":"ng"},{"name":"su","value":["0"]},{"name":"url","value":"/info/developer-blog/2014/dec/29/content-editable-selections-and-immutability"},{"name":"sh","value":"https://www.theguardian.com/p/443v2"},{"name":"co","value":["hugo-gibson"]},{"name":"k","value":["programming"]},{"name":"edition","value":"int"}]},"EUR":{"adTargeting":[{"name":"ct","value":"article"},{"name":"edition","value":"eur"},{"name":"k","value":["programming"]},{"name":"se","value":["engineering-blog"]},{"name":"p","value":"ng"},{"name":"su","value":["0"]},{"name":"url","value":"/info/developer-blog/2014/dec/29/content-editable-selections-and-immutability"},{"name":"sh","value":"https://www.theguardian.com/p/443v2"},{"name":"co","value":["hugo-gibson"]}]}},"pageType":{"hasShowcaseMainElement":false,"isFront":false,"isLiveblog":false,"isMinuteArticle":false,"isPaidContent":false,"isPreview":false,"isSensitive":false},"trailText":"Inherent problems with programming in an immutable fashion while using mutable objects.","nav":{"currentUrl":"/info","pillars":[{"title":"News","url":"/","longTitle":"Headlines","iconName":"home","children":[{"title":"UK","url":"/uk-news","longTitle":"UK news","children":[{"title":"UK politics","url":"/politics"},{"title":"Education","url":"/education","children":[{"title":"Schools","url":"/education/schools"},{"title":"Teachers","url":"/teacher-network"},{"title":"Universities","url":"/education/universities"},{"title":"Students","url":"/education/students"}]},{"title":"Media","url":"/media"},{"title":"Society","url":"/society"},{"title":"Law","url":"/law"},{"title":"Scotland","url":"/uk/scotland"},{"title":"Wales","url":"/uk/wales"},{"title":"Northern Ireland","url":"/uk/northernireland"}]},{"title":"US politics","url":"/us-news/us-politics"},{"title":"World","url":"/world","longTitle":"World news","children":[{"title":"Europe","url":"/world/europe-news"},{"title":"US","url":"/us-news","longTitle":"US news"},{"title":"Americas","url":"/world/americas"},{"title":"Asia","url":"/world/asia"},{"title":"Australia","url":"/australia-news","longTitle":"Australia news"},{"title":"Middle East","url":"/world/middleeast"},{"title":"Africa","url":"/world/africa"},{"title":"Inequality","url":"/inequality"},{"title":"Global development","url":"/global-development"}]},{"title":"Climate crisis","url":"/environment/climate-crisis"},{"title":"Middle East","url":"/world/middleeast"},{"title":"Ukraine","url":"/world/ukraine"},{"title":"Football","url":"/football","children":[{"title":"Live scores","url":"/football/live","longTitle":"football/live"},{"title":"Tables","url":"/football/tables","longTitle":"football/tables"},{"title":"Fixtures","url":"/football/fixtures","longTitle":"football/fixtures"},{"title":"Results","url":"/football/results","longTitle":"football/results"},{"title":"Competitions","url":"/football/competitions","longTitle":"football/competitions"},{"title":"Clubs","url":"/football/teams","longTitle":"football/teams"}]},{"title":"Newsletters","url":"/email-newsletters"},{"title":"Business","url":"/business","children":[{"title":"Economics","url":"/business/economics"},{"title":"Banking","url":"/business/banking"},{"title":"Money","url":"/money","children":[{"title":"Property","url":"/money/property"},{"title":"Pensions","url":"/money/pensions"},{"title":"Savings","url":"/money/savings"},{"title":"Borrowing","url":"/money/debt"},{"title":"Careers","url":"/money/work-and-careers"}]},{"title":"Markets","url":"/business/stock-markets"},{"title":"Project Syndicate","url":"/business/series/project-syndicate-economists"},{"title":"B2B","url":"/business-to-business"},{"title":"Retail","url":"/business/retail"}]},{"title":"Environment","url":"/environment","children":[{"title":"Climate crisis","url":"/environment/climate-crisis"},{"title":"Wildlife","url":"/environment/wildlife"},{"title":"Energy","url":"/environment/energy"},{"title":"Pollution","url":"/environment/pollution"}]},{"title":"UK politics","url":"/politics"},{"title":"Society","url":"/society"},{"title":"Science","url":"/science"},{"title":"Tech","url":"/technology"},{"title":"Global development","url":"/global-development"},{"title":"Obituaries","url":"/obituaries"}]},{"title":"Opinion","url":"/commentisfree","longTitle":"Opinion home","iconName":"home","children":[{"title":"The Guardian view","url":"/profile/editorial"},{"title":"Columnists","url":"/index/contributors"},{"title":"Cartoons","url":"/tone/cartoons"},{"title":"Opinion videos","url":"/type/video+tone/comment"},{"title":"Letters","url":"/tone/letters"}]},{"title":"Sport","url":"/sport","longTitle":"Sport home","iconName":"home","children":[{"title":"Football","url":"/football","children":[{"title":"Live scores","url":"/football/live","longTitle":"football/live"},{"title":"Tables","url":"/football/tables","longTitle":"football/tables"},{"title":"Fixtures","url":"/football/fixtures","longTitle":"football/fixtures"},{"title":"Results","url":"/football/results","longTitle":"football/results"},{"title":"Competitions","url":"/football/competitions","longTitle":"football/competitions"},{"title":"Clubs","url":"/football/teams","longTitle":"football/teams"}]},{"title":"Cricket","url":"/sport/cricket"},{"title":"Rugby union","url":"/sport/rugby-union"},{"title":"Tennis","url":"/sport/tennis"},{"title":"Cycling","url":"/sport/cycling"},{"title":"F1","url":"/sport/formulaone"},{"title":"Golf","url":"/sport/golf"},{"title":"Boxing","url":"/sport/boxing"},{"title":"Rugby league","url":"/sport/rugbyleague"},{"title":"Racing","url":"/sport/horse-racing"},{"title":"US sports","url":"/sport/us-sport"}]},{"title":"Culture","url":"/culture","longTitle":"Culture home","iconName":"home","children":[{"title":"Film","url":"/film"},{"title":"Music","url":"/music"},{"title":"TV & radio","url":"/tv-and-radio"},{"title":"Books","url":"/books"},{"title":"Art & design","url":"/artanddesign"},{"title":"Stage","url":"/stage"},{"title":"Games","url":"/games"},{"title":"Classical","url":"/music/classicalmusicandopera"}]},{"title":"Lifestyle","url":"/lifeandstyle","longTitle":"Lifestyle home","iconName":"home","children":[{"title":"The Filter","url":"/uk/thefilter"},{"title":"Fashion","url":"/fashion"},{"title":"Food","url":"/food"},{"title":"Recipes","url":"/tone/recipes"},{"title":"Travel","url":"/travel","children":[{"title":"UK","url":"/travel/uk"},{"title":"Europe","url":"/travel/europe"},{"title":"US","url":"/travel/usa"}]},{"title":"Health & fitness","url":"/lifeandstyle/health-and-wellbeing"},{"title":"Women","url":"/lifeandstyle/women"},{"title":"Men","url":"/lifeandstyle/men"},{"title":"Love & sex","url":"/lifeandstyle/love-and-sex"},{"title":"Beauty","url":"/fashion/beauty"},{"title":"Home & garden","url":"/lifeandstyle/home-and-garden"},{"title":"Money","url":"/money","children":[{"title":"Property","url":"/money/property"},{"title":"Pensions","url":"/money/pensions"},{"title":"Savings","url":"/money/savings"},{"title":"Borrowing","url":"/money/debt"},{"title":"Careers","url":"/money/work-and-careers"}]},{"title":"Cars","url":"/technology/motoring"}]}],"otherLinks":[{"title":"The Guardian app","url":"https://app.adjust.com/16xt6hai"},{"title":"Video","url":"/video"},{"title":"Podcasts","url":"/podcasts"},{"title":"Pictures","url":"/inpictures"},{"title":"Newsletters","url":"/email-newsletters"},{"title":"Today's paper","url":"/theguardian","children":[{"title":"Obituaries","url":"/obituaries"},{"title":"G2","url":"/theguardian/g2"},{"title":"Journal","url":"/theguardian/journal"},{"title":"Saturday","url":"/theguardian/saturday"}]},{"title":"Inside the Guardian","url":"https://www.theguardian.com/insidetheguardian"},{"title":"The Observer","url":"/observer","children":[{"title":"Comment","url":"/theobserver/news/comment"},{"title":"The New Review","url":"/theobserver/new-review"},{"title":"Observer Magazine","url":"/theobserver/magazine"},{"title":"Observer Food Monthly","url":"/theobserver/foodmonthly"}]},{"title":"Guardian Weekly","url":"https://www.theguardian.com/weekly?INTCMP=gdnwb_mawns_editorial_gweekly_GW_TopNav_UK"},{"title":"Crosswords","url":"/crosswords","children":[{"title":"Blog","url":"/crosswords/crossword-blog"},{"title":"Quick","url":"/crosswords/series/quick"},{"title":"Speedy","url":"/crosswords/series/speedy"},{"title":"Quick cryptic","url":"/crosswords/series/quick-cryptic"},{"title":"Everyman","url":"/crosswords/series/everyman"},{"title":"Quiptic","url":"/crosswords/series/quiptic"},{"title":"Cryptic","url":"/crosswords/series/cryptic"},{"title":"Prize","url":"/crosswords/series/prize"},{"title":"Azed","url":"/crosswords/series/azed"},{"title":"Genius","url":"/crosswords/series/genius"},{"title":"Weekend","url":"/crosswords/series/weekend-crossword"},{"title":"Special","url":"/crosswords/series/special"}]},{"title":"Wordiply","url":"https://www.wordiply.com"},{"title":"Corrections","url":"/theguardian/series/corrections-and-clarifications"}],"brandExtensions":[{"title":"Search jobs","url":"https://jobs.theguardian.com"},{"title":"Hire with Guardian Jobs","url":"https://recruiters.theguardian.com/?utm_source=gdnwb&utm_medium=navbar&utm_campaign=Guardian_Navbar_Recruiters&CMP_TU=trdmkt&CMP_BUNIT=jobs"},{"title":"Holidays","url":"https://holidays.theguardian.com?INTCMP=holidays_uk_web_newheader"},{"title":"Live events","url":"https://www.theguardian.com/guardian-live-events?INTCMP=live_uk_header_dropdown"},{"title":"About Us","url":"/about"},{"title":"Digital Archive","url":"https://theguardian.newspapers.com"},{"title":"Guardian Print Shop","url":"/artanddesign/series/gnm-print-sales"},{"title":"Patrons","url":"https://patrons.theguardian.com/?INTCMP=header_patrons"},{"title":"Guardian Licensing","url":"https://licensing.theguardian.com/"}],"readerRevenueLinks":{"header":{"contribute":"https://support.theguardian.com/contribute?INTCMP=header_support_contribute&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_HEADER%22,%22componentId%22:%22header_support_contribute%22%7D","subscribe":"https://support.theguardian.com/subscribe?INTCMP=header_support_subscribe&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_HEADER%22,%22componentId%22:%22header_support_subscribe%22%7D","support":"https://support.theguardian.com?INTCMP=header_support&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_HEADER%22,%22componentId%22:%22header_support%22%7D","supporter":"https://support.theguardian.com/subscribe?INTCMP=header_supporter_cta&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_HEADER%22,%22componentId%22:%22header_supporter_cta%22%7D"},"footer":{"contribute":"https://support.theguardian.com/contribute?INTCMP=footer_support_contribute&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_FOOTER%22,%22componentId%22:%22footer_support_contribute%22%7D","subscribe":"https://support.theguardian.com/subscribe?INTCMP=footer_support_subscribe&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_FOOTER%22,%22componentId%22:%22footer_support_subscribe%22%7D","support":"https://support.theguardian.com?INTCMP=footer_support&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_FOOTER%22,%22componentId%22:%22footer_support%22%7D","supporter":"https://support.theguardian.com/subscribe?INTCMP=footer_supporter_cta&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_FOOTER%22,%22componentId%22:%22footer_supporter_cta%22%7D"},"sideMenu":{"contribute":"https://support.theguardian.com/contribute?INTCMP=side_menu_support_contribute&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_HEADER%22,%22componentId%22:%22side_menu_support_contribute%22%7D","subscribe":"https://support.theguardian.com/subscribe?INTCMP=side_menu_support_subscribe&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_HEADER%22,%22componentId%22:%22side_menu_support_subscribe%22%7D","support":"https://support.theguardian.com?INTCMP=side_menu_support&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_HEADER%22,%22componentId%22:%22side_menu_support%22%7D","supporter":"https://support.theguardian.com/subscribe?INTCMP=mobilenav_print_cta&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_HEADER%22,%22componentId%22:%22mobilenav_print_cta%22%7D"},"ampHeader":{"contribute":"https://support.theguardian.com/contribute?INTCMP=header_support_contribute&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_HEADER%22,%22componentId%22:%22header_support_contribute%22%7D","subscribe":"https://support.theguardian.com/subscribe?INTCMP=header_support_subscribe&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_HEADER%22,%22componentId%22:%22header_support_subscribe%22%7D","support":"https://support.theguardian.com?INTCMP=amp_header_support&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_HEADER%22,%22componentId%22:%22amp_header_support%22%7D","supporter":"https://support.theguardian.com/subscribe?INTCMP=header_supporter_cta&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_HEADER%22,%22componentId%22:%22header_supporter_cta%22%7D"},"ampFooter":{"contribute":"https://support.theguardian.com/contribute?INTCMP=amp_footer_support_contribute&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_FOOTER%22,%22componentId%22:%22amp_footer_support_contribute%22%7D","subscribe":"https://support.theguardian.com/subscribe?INTCMP=amp_footer_support_subscribe&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_FOOTER%22,%22componentId%22:%22amp_footer_support_subscribe%22%7D","support":"https://support.theguardian.com?INTCMP=footer_support&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_FOOTER%22,%22componentId%22:%22footer_support%22%7D","supporter":"https://support.theguardian.com/subscribe?INTCMP=amp_footer_supporter_cta&acquisitionData=%7B%22source%22:%22GUARDIAN_WEB%22,%22componentType%22:%22ACQUISITIONS_FOOTER%22,%22componentId%22:%22amp_footer_supporter_cta%22%7D"}}},"showBottomSocialButtons":true,"pageFooter":{"footerLinks":[[{"text":"About us","url":"/about","dataLinkName":"uk : footer : about us","extraClasses":""},{"text":"Help","url":"https://manage.theguardian.com/help-centre","dataLinkName":"uk : footer : tech feedback","extraClasses":"js-tech-feedback-report"},{"text":"Complaints & corrections","url":"/info/complaints-and-corrections","dataLinkName":"complaints","extraClasses":""},{"text":"SecureDrop","url":"https://www.theguardian.com/securedrop","dataLinkName":"securedrop","extraClasses":""},{"text":"Work for us","url":"https://workforus.theguardian.com","dataLinkName":"uk : footer : work for us","extraClasses":""},{"text":"Privacy policy","url":"/info/privacy","dataLinkName":"privacy","extraClasses":""},{"text":"Cookie policy","url":"/info/cookies","dataLinkName":"cookie","extraClasses":""},{"text":"Terms & conditions","url":"/help/terms-of-service","dataLinkName":"terms","extraClasses":""},{"text":"Contact us","url":"/help/contact-us","dataLinkName":"uk : footer : contact us","extraClasses":""}],[{"text":"All topics","url":"/index/subjects/a","dataLinkName":"uk : footer : all topics","extraClasses":""},{"text":"All writers","url":"/index/contributors","dataLinkName":"uk : footer : all contributors","extraClasses":""},{"text":"Modern Slavery Act","url":"https://uploads.guim.co.uk/2024/09/04/Modern_Slavery_Statement_2024_.pdf","dataLinkName":"uk : footer : modern slavery act statement","extraClasses":""},{"text":"Tax strategy","url":"https://uploads.guim.co.uk/2024/08/27/TAX_STRATEGY_FOR_THE_YEAR_ENDED_31_MARCH_2025.pdf","dataLinkName":"uk : footer : tax strategy","extraClasses":""},{"text":"Digital newspaper archive","url":"https://theguardian.newspapers.com","dataLinkName":"digital newspaper archive","extraClasses":""},{"text":"Facebook","url":"https://www.facebook.com/theguardian","dataLinkName":"uk : footer : facebook","extraClasses":""},{"text":"YouTube","url":"https://www.youtube.com/user/TheGuardian","dataLinkName":"uk : footer : youtube","extraClasses":""},{"text":"Instagram","url":"https://www.instagram.com/guardian","dataLinkName":"uk : footer : instagram","extraClasses":""},{"text":"LinkedIn","url":"https://www.linkedin.com/company/theguardian","dataLinkName":"uk : footer : linkedin","extraClasses":""},{"text":"Newsletters","url":"/email-newsletters?INTCMP=DOTCOM_FOOTER_NEWSLETTER_UK","dataLinkName":"uk : footer : newsletters","extraClasses":""}],[{"text":"Advertise with us","url":"https://advertising.theguardian.com","dataLinkName":"uk : footer : advertise with us","extraClasses":""},{"text":"Guardian Labs","url":"/guardian-labs","dataLinkName":"uk : footer : guardian labs","extraClasses":""},{"text":"Search jobs","url":"https://jobs.theguardian.com","dataLinkName":"uk : footer : jobs","extraClasses":""},{"text":"Patrons","url":"https://patrons.theguardian.com?INTCMP=footer_patrons","dataLinkName":"uk : footer : patrons","extraClasses":""}]]},"publication":"theguardian.com","shouldHideReaderRevenue":false,"slotMachineFlags":"","contributionsServiceUrl":"https://contributions.guardianapis.com","isSpecialReport":false,"showTableOfContents":false,"lang":"en","isRightToLeftLang":false}