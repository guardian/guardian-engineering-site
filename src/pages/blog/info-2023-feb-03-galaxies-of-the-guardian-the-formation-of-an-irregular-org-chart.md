---
layout: ../../layouts/blog.astro
slug: 'info-2023-feb-03-galaxies-of-the-guardian-the-formation-of-an-irregular-org-chart'
headline: 'Galaxies of the Guardian: the formation of an irregular org chart'
date: '2023-02-03'
authors: [Frederick O''Brien]
standfirst: '‘Who does what and where?’ is an age-old question. We in Product & Engineering have tried to answer it with Galaxies, a data visualisation of interconnected people, teams, and streams'
image:
  url: 'https://media.guim.co.uk/693216386ce87eb40eb5813a3765777909272aac/15_0_482_289/482.jpg'
  alt: 'Screenshot of the D3 force directed org chart generated by Galaxies (of the Guardian)'
  credit: 'Illustration: The Guardian'
tags: []
---

We all feel a little lost at times. Who am I? What is my purpose? Who’s the best person to speak to about setting up my AWS credentials? Anyone who says they aren’t occasionally haunted by these questions is lying to you.

A common way to try to answer these kinds of questions is through organisational charts. Org charts aren’t the first things that come to mind when thinking of something inspiring, which is a shame because the information they’re trying to convey can be fascinating – it just needs to be presented in the right way.

Over the last few months a few of us in the product and engineering department have been building our own kind of org chart called Galaxies – an attempt to present organisational structure in a beautiful, intuitive, non-hierarchical form.

What follows is a little about how it came to be, how it works, and where it’s heading.

Formation
---------

Work on Galaxies began during my time on [the software engineering fellowship scheme](https://www.theguardian.com/info/2021/nov/26/guardian-software-engineering-fellowship-2022-apply-now) – an opportunity for fledgling developers to join the P&E department and learn on the job. Independent learning is strongly encouraged, and one of the topics I wanted to learn more about was data visualisation.

After chats with [the visuals team](https://www.theguardian.com/interactive) and pairing sessions with [Max Duval](https://www.theguardian.com/info/2021/jun/25/a-day-in-the-life), one of the department’s data viz maestros, I took [a freeCodeCamp course on D3](https://www.freecodecamp.org/news/data-visualizatoin-with-d3/), a JavaScript data visualisation library. Taught by Doctor Curran Kelleher, the course was a fantastic introduction, and wrapped up with a session on a little module called [d3-force](https://github.com/d3/d3-force).

D3 force is a particle simulator that mimics Newton’s equations of motion by using [verlet integration](https://en.wikipedia.org/wiki/Verlet_integration). The previous sentence is a mystery to me, but the long and short of it is that it allows you to render particles and the relationships between them. Below is an example of what that can look like:


   <figure>
   <img alt="An example of how D3 force directed graphs can present networks" src="https://i.guim.co.uk/img/media/c2df952434bca165fc4de5213d32e6fa403c30d7/0_0_512_267/master/512.jpg?width=620&quality=45&auto=format&fit=max&dpr=2&s=d3d53b097e38e42075b325b91ba5ed1e" loading="lazy" />
   <figcaption>
     An example of how D3 force directed graphs can present networks.
    <i>Illustration: D3</i>
    </figcaption>
    </figure>

Around the same time I was getting to grips with force directed graphs, the latest iteration of the P&E org chart was released. It was extremely detailed, but also painstaking to assemble and maintain. The department is organised in streams. Each stream contains teams, and each team contains people. It’s a lot of moving parts. It begged the question: could department information be presented in a force graph as a series of interconnected people, teams, and streams?

Early pairing efforts with [Tom Richards](https://www.theguardian.com/profile/tom-richards) were simple yet promising, and as our sessions continued the project began to take shape. I showed an early prototype to [Chloe Kirton](https://www.theguardian.com/info/2022/may/25/day-in-the-life-chloe-kirton) and she suggested the name Galaxies (of the Guardian). It stuck.


   <figure>
   <img alt="Data visualisation of interconnected multicoloured nodes" src="https://i.guim.co.uk/img/media/6fd0eee963cb34af5bb1df461b37714e33849fdc/0_0_512_498/master/512.jpg?width=620&quality=45&auto=format&fit=max&dpr=2&s=cccac623ca3aa51af002c1a6d86ab202" loading="lazy" />
   <figcaption>
     An early proof of concept for the Galaxies project.
    <i>Illustration: The Guardian</i>
    </figcaption>
    </figure>

When the next hack day came around, Maria Olanipekun, [Zeke Hunter-Green](https://www.theguardian.com/profile/zeke-hunter-green), Michael Clapham, and I banded together (with further help from Max Duval) to get Galaxies up and running properly. Since then it’s continued to evolve and sits alongside other internal tools.

How Galaxies works
------------------

Galaxies has evolved into a modest full stack project. There is the user interface, but also a data collection and parsing service, as well as authentication checks to keep the data safely in house. From front to back, this is how it works.

User interface
--------------

The user interface of Galaxies is built using React and the force-chart module of D3. The P&E department is displayed as a series of interlinked people, teams, streams and nodes. Clicking on a node brings up more information about it in the sidebar. It also highlights every related node, allowing users to see that node’s context at a glance.


   <figure>
   <img alt="Screenshot of the Galaxies of the Guardian org chart interface" src="https://i.guim.co.uk/img/media/827daca967aa7bb1ac88586ac0d8fa650205ddee/0_0_512_254/master/512.jpg?width=620&quality=45&auto=format&fit=max&dpr=2&s=9623362723ff0647b084cd9d0042cd13" loading="lazy" />
   <figcaption>
     The Galaxies of the Guardian interface.
    <i>Illustration: The Guardian</i>
    </figcaption>
    </figure>

For D3 to do this it needs two things:

*   **Nodes**
    
*   **Links** between those nodes

In practice this translates to two arrays of objects. A simple example looks like this:

**Nodes**

```javascript
[
	{ 
           “id”: “fred”,
           “nodeType”: “human”
      },
	{ 
           “id”: “sam”,
           “nodeType”: “human”
      },
	{ 
           “id”: “ophan”, 
           “nodeType”: “team”
      },
	{ 
           “id”: “journalismTools”,
           “nodeType”: “stream”
      }
]
```

**Links**

```javascript
[
	{
		“source”: “fred”,
		“target”: “ophan”
	},
	{
		“source”: “sam”,
		“target”: “ophan”
	},
     {
		“source”: “ophan”,
		“target”: “journalismTools”
	}
]
```

D3 uses the “id” field to piece the nodes together. With a little bit of styling to make different node types different sizes, the result looks a little bit like this:


   <figure>
   <img alt="A simple illustration of interconnected nodes in the style of D3 force directed graphs" src="https://i.guim.co.uk/img/media/a345fadd7545811ac3438c0df1d97d05009fc569/0_0_512_447/master/512.jpg?width=620&quality=45&auto=format&fit=max&dpr=2&s=537d03aaf98836e2a34328760e15635b" loading="lazy" />
   <figcaption>
     When we boil things down, isn’t it all interconnected blobs?
    <i>Illustration: The Guardian</i>
    </figcaption>
    </figure>

The same principle applies to Galaxies, just at a larger scale. There are extra details in the node objects that allow for richer presentation and interaction, but all that’s really happening under the hood is things linked to other things.

Data refresher
--------------

All of this is made possible by data that is fetched by an AWS Lambda that runs every five minutes to check whether the P&E Teams/People spreadsheet has been updated. If it has, the Lambda parses the data, formats it in a way D3 will understand, and puts it into S3 buckets. The files are then proxied to Galaxies’ data endpoint and it’s good to go.

From data viz to dataset
------------------------

A big shift has happened while working on Galaxies. To start with I very much viewed it as a data visualisation project. It’s a natural thing to think, right? Presenting organisational structure in the form of multicoloured blobs gives off that vibe.


   <figure>
   <img alt="Data and Lore face to face in Star Trek: The Next Generation" src="https://i.guim.co.uk/img/media/2daedc5a25b21a987a0f50bd6f900869be55367c/0_0_1842_2756/master/1842.jpg?width=620&quality=45&auto=format&fit=max&dpr=2&s=52beb24ca1a202e89ead3a6dec592680" loading="lazy" />
   <figcaption>
     Data, meet Data. (We know it’s Lore, work with us here.)
    <i>Photograph: Cinetext/Paramount/Allstar</i>
    </figcaption>
    </figure>

However, the more time I’ve spent with it the clearer it’s become that Galaxies is not a data visualisation project at heart, but a _dataset_ project.

We hamstring ourselves by storing information as documents instead of data. Whether it be organisational structure or [water industry monopolies](https://www.theguardian.com/uk-news/2021/feb/08/royals-vetted-more-than-1000-laws-via-queens-consent), by data-fying that information you open the door to striking stories, insights, and visualisations. Internet activist [Aaron Swartz](https://www.theguardian.com/technology/2013/jun/02/aaron-swartz-hacker-genius-martyr-girlfriend-interview) possibly put it best in his posthumously published book [A Programmable Web](https://www.morganclaypool.com/doi/abs/10.2200/S00481ED1V01Y201302WBE005):

_“Documents can’t really be merged and integrated and queried; they serve mostly as isolated instances to be viewed and reviewed. But data are protean, able to shift into whatever shape best suits your needs.”_

The Galaxies force graph is just one shape of a dataset. The same data could be used for directories, or dashboards, or who knows what else. Maybe it will be.

For example, if we plug the Galaxies node and link data into [3d-force-graph](https://github.com/vasturiano/3d-force-graph) (a project that uses [Three.js](https://threejs.org/) and [WebGL](https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API)) we are able to render this within minutes:


   <figure>
   <img alt="The Guardian P&E department rendered in glorious 3D" src="https://i.guim.co.uk/img/media/60da6bbd05d566a65467032cbb760eb9eb28f22d/0_0_512_254/master/512.jpg?width=620&quality=45&auto=format&fit=max&dpr=2&s=b58bc2a674724360ec0964f51877c3ab" loading="lazy" />
   <figcaption>
     The Guardian P&amp;E department rendered in glorious 3D
    <i>Illustration: The Guardian</i>
    </figcaption>
    </figure>

The data is the hard bit. Now the Galaxies dataset is in hand the use cases for it are almost annoyingly easy to explore. If the data is good the applications will take care of themselves.

To boldly go …
--------------

Galaxies is a work in progress. Although it has come on leaps and bounds since its formative weeks, there is still a world of options we’d like to explore – accessibility improvements, other departments, spaceships, the list goes on and on.

A priority is making the data accessible within the Guardian. As a fan of [Sir Tim Berners-Lee’s vision of linked open data](https://www.youtube.com/watch?v=OM6XIICm_qo), I’m keen to make Galaxies as open as reasonably possible. Obviously we don’t want this particular dataset publicly available, but we do want it as accessible as possible within the Guardian.

However Galaxies grows, and however many departments it winds up encompassing, I want to preserve an ethos that has crystallised while working on it.

*   Customisable
    
*   Easy to update
    
*   Open (within reason)
    
*   Robust
    
*   Non hierarchical

To my mind any org chart worth its salt should strive to reflect the breadth of skills, experiences, and backgrounds it’s composed of. Does Galaxies achieve that? Not yet, but it might one day. For that to happen the visuals must be beautiful, and that in turn requires quality data.

There is power in how you present information. From news stories to org charts, the goal is to do justice to the complexity of the subject matter while making it intuitive and easy to understand. The results may sometimes be irregular, but that’s all part of the fun.

_**Development of digital products is central to the Guardian. You could be building the products that showcase our progressive and independent journalism, crafting the tools that journalists use to write their stories, developing the services that allow those stories to be distributed across the globe, or safeguarding our financial future.**_

_**If you’re interested in joining our product and engineering team, please visit the [Guardian News & Media careers page](https://workforus.theguardian.com/).**_
